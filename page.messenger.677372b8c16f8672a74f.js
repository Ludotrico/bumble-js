"use strict";(("undefined"!=typeof self?self:window).webpackChunk=("undefined"!=typeof self?self:window).webpackChunk||[]).push([[212],{7896633375:function(e,t,r){r.r(t),r.d(t,{default:function(){return qi}});r(1458508656),r(5870850526),r(4868193150),r(5180755806),r(4170012245),r(1955050064),r(4408193778),r(8259291635),r(3628678357),r(7497756815),r(3961928829),r(8254830055),r(2366301625),r(595114036);var n=r(5799271390),o=r(2798562877),i=r(6213419230),s=r(5807393358),a=r(322880820),c=r(2454231317),l=r(1237301108),u=r.n(l),p=r(2061470840),f=function(e){var t=e.chat,r=e.profile,n=e.hasVisibleProfile,o=e.reportUser,i=e.dropAreaText,s=e.hasActiveDropArea,l={profile:u()({page__profile:!0,"is-expanded":n}),content:u()({page__content:!0,"has-drag":s})};return(0,p.jsxs)(a.Z,{children:[(0,p.jsxs)("main",{className:l.content,children:[t,o,s&&(0,p.jsx)(c.Z,{dropText:i,isActive:!0})]}),(0,p.jsx)("aside",{className:l.profile,onTransitionEnd:e.onTransitionEnd,children:r})]})},h=(r(1461117636),r(7108588499),r(3228654677),r(1869886680),r(6928302667),r(7380242475)),d=r(6675447183),m=r.n(d),v=r(5819901282),y=r(1473791984),g=r(4862146082),b=r(574395244),_=r(1574766092),x=r(8441140475),j={getLxDeletedFemale:function(e){return(0,p.jsx)(_.f1,{path:411,params:e,pathName:"bma_client@messenger.field.placeholder.deleted-female"})},getLxDeletedMale:function(e){return(0,p.jsx)(_.f1,{path:412,params:e,pathName:"bma_client@messenger.field.placeholder.deleted-male"})},get lxFieldPlaceholder(){return x.Z.get(410)}},P=r(7415088051),S=r(6056868482),w=r(4413782038),k=r(1232357764),C=r(7930707067),E=r(7292175347),O=r(7335381311),R=r(8513482079),M=r(5317363642),T=r(3468167609),N=r(4346982762),I=r(4368022350),D=r(2397427841),A=r(2240692593),U=r(4003688673),L=r(5425093918),B=r(6118639306),Z=r(3829416461),F={get lxUnmatch(){return(0,p.jsx)(_.f1,{path:429,pathName:"bma_client@page.messenger.unmatch"})},get lxBlockReport(){return(0,p.jsx)(_.f1,{path:428,pathName:"bma_client@page.messenger.block_report"})},get lxDone(){return(0,p.jsx)(_.f1,{path:55,pathName:"bma_client@bumble.common.completion_button"})},get lxVideoChatTooltip(){return(0,p.jsx)(_.f1,{path:430,pathName:"bma_client@page.messenger.video_chat_tooltip"})}},G=r(7099749023),V=r(5326901354),z=r(5313987286),q=r(817839832),H=r(5036180810),W=function(e){var t=e.photoUrl,r=e.name,n=e.options,o=e.isUserMenuOpened,i=e.onMenuClick,s=e.isLoading,a=e.actionStatus,c=e.onUserClick,l=e.additionalMenu,f=e.onCloseClick,h={block:u()({"messages-header":!0,"is-loading":s}),avatar:u()({"messages-header__avatar":!0,"is-clickable":Boolean(c)}),name:u()({"messages-header__name":!0,"is-clickable":Boolean(c)}),menuItem:u()({"messages-header__menu-item":!0,"is-active":o})};return(0,p.jsx)("div",{className:h.block,children:(0,p.jsxs)("div",{className:"messages-header__inner",children:[(0,p.jsx)("div",{className:h.avatar,onClick:c,children:(0,p.jsx)(G.ZP,{photoUrl:t,alt:r})}),(0,p.jsxs)("div",{className:"messages-header__content",children:[(0,p.jsx)("div",{className:h.name,onClick:c,dir:"auto",children:(0,p.jsx)(H.zV,{children:r})}),a?(0,p.jsx)("div",{className:"messages-header__action-status",children:a}):null]}),(0,p.jsxs)("div",{className:"messages-header__menu",children:[l,(0,p.jsxs)("div",{className:"messages-header__menu-section",children:[(0,p.jsxs)("div",{className:h.menuItem,onClick:i,role:"button",children:[(0,p.jsx)("div",{className:"messages-header__menu-icon",children:(0,p.jsx)(V.ZP,{name:"generic-menu",size:V.Jh.STRETCH})}),(0,p.jsx)(z.Z,{isActive:o,children:(0,p.jsx)(q.Z,{children:n})})]}),(0,p.jsx)("div",{className:"messages-header__menu-item",role:"button",onClick:f,children:(0,p.jsx)("div",{className:"messages-header__menu-icon",children:(0,p.jsx)(V.ZP,{name:"generic-close",size:V.Jh.STRETCH})})})]})]})]})})},J=r(2059699252),Y=r(5078491522),$=function(e){var t=e.tooltipText,r=e.onVideoCallClick,n=e.onPhoneCallClick,o=e.onTooltipClickClose,i=e.isTooltipActive;return(0,p.jsxs)("div",{className:"messages-header__menu-section",children:[n?(0,p.jsx)("div",{className:"messages-header__menu-item",role:"button",onClick:n,children:(0,p.jsx)("div",{className:"messages-header__menu-icon",children:(0,p.jsx)(V.ZP,{name:"generic-phone",size:V.Jh.STRETCH})})}):null,r?(0,p.jsx)("div",{className:"messages-header__menu-item",role:"button",onClick:r,children:(0,p.jsx)("div",{className:"messages-header__menu-icon",children:(0,p.jsx)(V.ZP,{name:"generic-video",size:V.Jh.STRETCH})})}):null,t?(0,p.jsx)(J.ZP,{isActive:i,align:J.Mg.LEFT,direction:J.AR.BOTTOM,type:J.fR.PROMO,color:J.Jh.CUSTOM,colorCustomValue:Y.n0,onClickClose:o,children:t}):null]})},Q=r(7299007755),X=r(2867835909),K=r(330903792),ee=r(3567781661),te=r(4775161834),re=r(6034962138),ne=r(5338317810);function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,se(n.key),n)}}function se(e){var t=function(e,t){if("object"!==oe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===oe(t)?t:String(t)}function ae(e,t){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ae(e,t)}function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ue(e);if(t){var o=ue(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return le(e)}(this,r)}}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(e)}var pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ae(e,t)}(i,e);var t,r,n,o=ce(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(le(t)),t.state={isUserMenuOpened:!1,incomingWriting:!1},t.incomingWritingEnd=(0,d.debounce)(t.handleIncomingWritingEnd,4e3,le(t)),t}return t=i,r=[{key:"componentDidMount",value:function(){v.Z.on(y.CHAT_IS_WRITING,this.handleIncomingWritingNotification,this),v.Z.on(y.CHAT_MESSAGE,this.handleIncomingMessage,this),document.body.addEventListener("click",this.handleCloseMenu,!0),this.isAdditionalMenuActive()&&this.props.actions.checkStoredTooltipInfo()}},{key:"componentDidUpdate",value:function(e){e.chatUser!==this.props.chatUser&&this.setIncomingWriting(!1),e.chatUser.webrtc_status!==this.props.chatUser.webrtc_status&&1===this.props.chatUser.webrtc_status&&this.isAdditionalMenuActive()&&this.props.actions.checkStoredTooltipInfo()}},{key:"componentWillUnmount",value:function(){this.incomingWritingEnd.clear(),v.Z.un(y.CHAT_IS_WRITING,this.handleIncomingWritingNotification,this),v.Z.un(y.CHAT_MESSAGE,this.handleIncomingMessage,this),document.body.removeEventListener("click",this.handleCloseMenu,!0)}},{key:"render",value:function(){var e,t=this.props,r=t.chatUser,n=t.isTooltipActive,o=(0,U.gJ)((null===(e=r.profile_photo)||void 0===e?void 0:e.large_url)||"",50,50,!0),i=null;this.state.incomingWriting&&(i=(0,p.jsx)(L.ZP,{shape:L.lA.JUMPING_DOTS}));var s=r.is_deleted?void 0:this.handleUserClick;return(0,p.jsx)(W,{photoUrl:o,name:r.name,options:this.renderMenuOptions(),isUserMenuOpened:this.state.isUserMenuOpened,actionStatus:i,onMenuClick:this.handleMenuClick,onUserClick:s,onCloseClick:this.handleCloseContact,additionalMenu:this.isAdditionalMenuActive()?(0,p.jsx)($,{tooltipText:F.lxVideoChatTooltip,isTooltipActive:n,onTooltipClickClose:this.handleTooltipClose,onPhoneCallClick:this.handlePhoneCallClick,onVideoCallClick:this.handleVideoCallClick}):null})}},{key:"renderMenuOptions",value:function(){var e=this.props.commonSettings,t=[(0,p.jsx)(Q.Z,{onClick:this.handleUnmatch,text:F.lxUnmatch},"unmatch"),(0,p.jsx)(Q.Z,{onClick:this.handleReportUser,text:F.lxBlockReport},"block")];return e.is_bumble_event_moderator&&(t.push((0,p.jsx)(Q.Z,{onClick:this.handleApproveEvent,text:"Approve a user"},"approve")),t.push((0,p.jsx)(Q.Z,{onClick:this.handleDisapproveEvent,text:"Disapprove a user"},"disapprove")),t.push((0,p.jsx)(Q.Z,{onClick:this.handleComplains,text:"Complains interface"},"complains"))),t}},{key:"handlePhoneCallClick",value:function(){this.props.actions.startVideoChat(this.props.activeChat.chat_user,!1,11),this.props.hotpanel.click(351)}},{key:"handleVideoCallClick",value:function(){this.props.actions.startVideoChat(this.props.activeChat.chat_user,!0,11),this.props.hotpanel.click(352)}},{key:"isAdditionalMenuActive",value:function(){var e,t,r=this.props,n=r.callState,o=r.activeChat;return(null==o?void 0:o.is_chat_available)&&!(null===(e=o.chat_user)||void 0===e?void 0:e.is_deleted)&&1===(null===(t=null==o?void 0:o.chat_user)||void 0===t?void 0:t.webrtc_status)&&!n}},{key:"handleTooltipClose",value:function(){this.props.actions.hideTooltip()}},{key:"setIncomingWriting",value:function(e){this.setState({incomingWriting:e})}},{key:"handleUnmatch",value:function(e){e.stopPropagation();var t=this.props.isNewReportingFlow?ne.l:te.U;this.props.actions.showDialog(t,{userId:this.props.chatUser.user_id,gameMode:this.props.chatUser.match_mode,clientSource:189,blockingRequired:!1,reportType:7,needDeleteUser:!0,onReportActionDone:this.handleReportActionDone},{isLocal:!0}),this.setState({isUserMenuOpened:!1}),this.props.isNewReportingFlow&&this.props.hotpanel.click(215,649)}},{key:"handleReportActionDone",value:function(){this.props.actions.openNextUser(),this.props.actions.closeUserProfile()}},{key:"handleUserClick",value:function(){this.props.hotpanel.click(219),!this.props.chatUser.is_deleted&&this.props.onUserClick&&this.props.onUserClick()}},{key:"handleIncomingWritingEnd",value:function(){this.setIncomingWriting(!1)}},{key:"handleIncomingWritingNotification",value:function(e){e.who_is_writing===this.props.chatUser.user_id&&(this.setIncomingWriting(!0),this.incomingWritingEnd())}},{key:"handleIncomingMessage",value:function(){this.setIncomingWriting(!1),this.incomingWritingEnd.clear()}},{key:"handleReportUser",value:function(e){e.stopPropagation();var t=this.props.isNewReportingFlow?re.f:te.U;this.props.actions.showDialog(t,{userId:this.props.chatUser.user_id,gameMode:this.props.chatUser.match_mode,clientSource:190,blockingRequired:!0,reportType:8,needDeleteUser:!0,onReportActionDone:this.handleReportActionDone},{isLocal:!0}),this.setState({isUserMenuOpened:!1}),this.props.hotpanel.click(87,649)}},{key:"handleMenuClick",value:function(){this.props.hotpanel.click(650),this.setState({isUserMenuOpened:!this.state.isUserMenuOpened})}},{key:"handleCloseMenu",value:function(){this.state.isUserMenuOpened&&this.setState({isUserMenuOpened:!1})}},{key:"handleCloseContact",value:function(){this.props.actions.routeToPage(new A.Z)}},{key:"handleApproveEvent",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.props.actions.moderatorAction({actionType:5,userId:this.props.chatUser.user_id,onDone:function(){t.props.actions.showDialog(ee.a,{title:F.lxDone})}}),this.setState({isUserMenuOpened:!1})}},{key:"handleDisapproveEvent",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.props.actions.moderatorAction({actionType:6,userId:this.props.chatUser.user_id,onDone:function(){t.props.actions.showDialog(ee.a,{title:F.lxDone})}}),this.setState({isUserMenuOpened:!1})}},{key:"handleComplains",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.actions.moderatorAction({actionType:7,userId:this.props.chatUser.user_id,onDeepLink:function(e){(null==e?void 0:e.continue_url)&&(window.location.href=e.continue_url)}}),this.setState({isUserMenuOpened:!1})}}],r&&ie(t.prototype,r),n&&ie(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.PureComponent);var fe,he=(0,o.$j)((function(e){return{commonSettings:e.app.commonSettings,isTooltipActive:e.videoChat.isTooltipActive,activeChat:e.messenger.chat.activeChat,callState:e.videoChat.callState,isNewReportingFlow:(0,B.t)(Z.Dp,e.app.commonSettings)}}),(function(e){return{actions:(0,i.DE)({routeToPage:X.PT,showDialog:C.vC,moderatorAction:K.ZJ,checkStoredTooltipInfo:S.u$,hideTooltip:S.i8,startVideoChat:S.gd,openNextUser:K.v4,closeUserProfile:R.Rb},e),hotpanel:(0,i.DE)({click:O.V4},e)}}))(pe),de=(r(2208919297),r(5188765678),r(2990496325),r(8399856839),r(2934925121),r(5307322158),r(5045656282),r(6846535975),r(7824257547),r(3255534241)),me=r(2622027921);function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function ye(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ve(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ve(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.MP4="video/mp4",e.IMAGE="image"}(fe||(fe={}));var ge=function(e){var t=e.src,r=e.sourceType,n=void 0===r?fe.MP4:r,o=e.aspectRatio,i=e.isLoading,s=e.hasError,a=n===fe.MP4?(0,p.jsx)("video",{className:"message-gif__media",autoPlay:!0,loop:!0,children:(0,p.jsx)("source",{src:t,type:n})}):(0,p.jsx)("img",{className:"message-gif__media",src:t});return(0,p.jsxs)("div",{className:"message-gif",style:ye({},"--aspect-ratio",o||1),children:[i||s?null:a,i&&!s?(0,p.jsx)(L.ZP,{}):null,s?(0,p.jsx)(V.ZP,{name:"generic-attention-outlined",size:V.Jh.LARGE}):null,(0,p.jsx)("div",{className:"message-gif__logo",children:(0,p.jsx)(V.ZP,{name:"logo-giphy",size:V.Jh.STRETCH})})]})};function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function _e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xe(n.key),n)}}function xe(e){var t=function(e,t){if("object"!==be(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===be(t)?t:String(t)}function je(e,t){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},je(e,t)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Se(e)}(this,r)}}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}var ke,Ce=[me.Sz,me.v7,me.pd],Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}(i,e);var t,r,n,o=Pe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(Se(t)),t}return t=i,r=[{key:"render",value:function(){var e=this.props,t=e.errors,r=e.message,n=this.getGiphyId((0,g.UD)(r)),o=this.getGifSource(n),i=o&&o.type,s=!o,a=Boolean(n&&t[n]);return(0,p.jsx)(de.Z,{onElementVisible:this.handleGifMessageVisible.bind(this,n),children:(0,p.jsx)(ge,{isLoading:s,hasError:a,src:s?void 0:o.url,sourceType:o&&i?this.getMessageGifSourceType(i):void 0,aspectRatio:o?this.getAspectRatio(o):1})})}},{key:"handleGifMessageVisible",value:function(e){!this.getGifFromCache(e)&&e&&this.props.actions.loadGifById(e)}},{key:"getGiphyId",value:function(e){var t=new RegExp("giphy.com/embed/(.+)|media.giphy.com/media/(.+?)/giphy.gif|i.giphy.com/(.+?).gif|giphy.com/gifs/(?:.*-)?(.+)");return(e&&t.exec(e)||[]).slice(1).find((function(e){return Boolean(e)}))}},{key:"getGifSource",value:function(e){var t=this.props.supportedMediaTypes,r=this.getGifFromCache(e),n=r&&r.original;return n?(0,k.J3)(n,Ce,t):null}},{key:"getGifFromCache",value:function(e){if(e)return this.props.cache[e]}},{key:"getMessageGifSourceType",value:function(e){return e===me.Sz?fe.MP4:fe.IMAGE}},{key:"getAspectRatio",value:function(e){var t=e.width,r=e.height;return t&&r?t/r:1}}],r&&_e(t.prototype,r),n&&_e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.PureComponent),Oe=(0,o.$j)((function(e){return{cache:e.messenger.giphy.cache,errors:e.messenger.giphy.errors,supportedMediaTypes:e.env.features.supportedMediaTypes}}),(function(e){return{actions:(0,i.DE)({loadGifById:k.IC},e)}}))(Ee),Re=(r(7299538547),r(2821953985)),Me={get lxPrivateMessageTitle(){return(0,p.jsx)(_.f1,{path:118,pathName:"bma_client@bumble.page.messenger.private.message.title"})},get lxPrivateMessageCtaText(){return(0,p.jsx)(_.f1,{path:116,pathName:"bma_client@bumble.page.messenger.private.message.cta_text"})}},Te=r(3727690201),Ne=function(e){var t=e.emoji,r=e.text;return(0,p.jsxs)("div",{className:u()("message-reaction",{"has-emoji":t,"has-text":r}),children:[r&&(0,p.jsx)("div",{className:"message-reaction__text",dir:"auto",children:(0,p.jsx)(H.P1,{isDangerous:!0,hasBreakWords:!0,children:r})}),t&&(0,p.jsx)("div",{className:"message-reaction__emoji",children:(0,p.jsx)(Te.ZP,{size:Te.Su.STRETCH,glyph:t})})]})};function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}!function(e){e.DARK="DARK"}(ke||(ke={}));var De,Ae,Ue,Le=function(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ie(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ie(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},ke.DARK,"message-media__overlay--dark"),Be=function(e){var t=e.image,r=e.isBlurred,n=e.onClick,o=e.aspectRatio,i=void 0===o?1:o,s=e.imageHeight,a=e.overlay,c=e.reaction,l={block:u()({"message-media":!0,"is-blurred":r,"has-reaction-text":null==c?void 0:c.text,"has-reaction-emoji":null==c?void 0:c.emoji}),overlay:u()({"message-media__overlay":!0},void 0!==a&&void 0!==a.background&&Le[a.background])},f=i?{"--aspect-ratio":i,"--image-height":s?"".concat(s,"px"):null}:void 0;return(0,p.jsxs)("div",{className:l.block,onClick:n,style:f,children:[t?(0,p.jsx)("div",{className:"message-media__image",children:(0,p.jsx)("img",{src:t,alt:""})}):null,a?(0,p.jsx)("div",{className:l.overlay,children:a.children}):null,c&&(0,p.jsx)("div",{className:"message-media__reaction",children:(0,p.jsx)(Ne,{emoji:c.emoji,text:c.text})})]})},Ze={get lxMakeUnsafeCta(){return(0,p.jsx)(_.f1,{path:416,pathName:"bma_client@messenger.image.make_unsafe_cta",children:"Click to view"})}};function Fe(e){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(e)}function Ge(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Fe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Fe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ve(e,t,r,n){var o={configurable:!0,enumerable:!0};return o[e]=n,Object.defineProperty(t,r,o)}!function(e){e.SAFE="SAFE",e.LEWD="LEWD"}(Ue||(Ue={}));var ze=(Ve("get",De={},Ue.SAFE,(function(){return[Ze.lxMakeUnsafeCta]})),Ve("get",De,Ue.LEWD,(function(){})),De),qe=(Ge(Ae={},Ue.SAFE,"chat-action-tap"),Ge(Ae,Ue.LEWD,"chat-detector-lewd"),Ae),He=function(e){var t=e.type,r=e.text||(void 0!==t?ze[t]:void 0);return(0,p.jsxs)("div",{className:"message-media-overlay",children:[void 0!==t&&qe[t]?(0,p.jsx)("div",{className:"message-media-overlay__icon",children:(0,p.jsx)(V.ZP,{name:qe[t],size:V.Jh.LARGE})}):null,r?r.map((function(e,t){return(0,p.jsx)("div",{className:"message-media-overlay__text",children:(0,p.jsx)(H.P3,{children:e})},"overlay-text-".concat(t))})):null]})},We=function(){return(0,p.jsx)("div",{className:"message-media-warning",children:(0,p.jsx)("div",{className:"message-media-warning__icon",children:(0,p.jsx)(V.ZP,{name:"badge-attention",size:V.Jh.MEDIUM})})})},Je=r(3610594093),Ye=r(8442664355);function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xe(n.key),n)}}function Xe(e){var t=function(e,t){if("object"!==$e(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==$e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===$e(t)?t:String(t)}function Ke(e,t){return Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ke(e,t)}function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===$e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tt(e)}(this,r)}}function tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(e){return rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rt(e)}function nt(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").startsWith("blob:")}var ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ke(e,t)}(i,e);var t,r,n,o=et(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(tt(t)),t}return t=i,(r=[{key:"render",value:function(){var e=this.props,t=e.message,r=e.errorType,n=t.multimedia,o=n&&n.photo,i=n&&n.visibility;if(o&&i&&4===i.visibility_type){var s,a=o.large_photo_size,c=(0,Re.pw)(a,P.Ue,P.Ik);t.hasLewdPhoto&&t.isMasked?s={children:(0,p.jsx)(He,{type:Ue.LEWD,text:[Me.lxPrivateMessageTitle,Me.lxPrivateMessageCtaText]}),background:ke.DARK}:91===r&&(s={children:(0,p.jsx)(We,{})});var l=o.large_url;return(0,p.jsx)(Be,{image:nt(l)?l:this.getPreviewUrl(o),onClick:this.handlePhotoClick.bind(this,t),aspectRatio:c.aspectRatio?c.aspectRatio:void 0,imageHeight:c.height,overlay:s})}return null}},{key:"handlePhotoClick",value:function(e){var t=this,r=e.uid,n=e.multimedia,o=n&&n.photo;r&&e.hasLewdPhoto&&e.isMasked?(this.props.hotpanel.click(522),this.props.actions.sendChatMessageAction({userId:e.fromPersonId,actionType:1,messagesIds:[r],context:10,onDone:function(e){var r=e.multimedia,n=r&&r.photo;n&&t.showPhoto(n,!0)}})):o&&this.showPhoto(o,!1)}},{key:"showPhoto",value:function(e,t){var r=this.props.userId;this.props.actions.showDialog(Ye.z,{images:[e]}),this.props.hotpanel.viewEnlargedPhoto({userId:r,photoId:e.id,wasHidden:t,activationPlace:11})}},{key:"getPreviewUrl",value:function(e){return new Je.Z(e.large_url).setSize(P.Ue,P.Ik).getUrl()}}])&&Qe(t.prototype,r),n&&Qe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.PureComponent);var it=(0,o.$j)(null,(function(e){return{actions:(0,i.DE)({showDialog:C.vC,sendChatMessageAction:P.qQ},e),hotpanel:(0,i.DE)({click:O.V4,viewEnlargedPhoto:O.Mv},e)}}))(ot),st=function(e){return(0,p.jsx)(_.f1,{path:110,params:e,pathName:"bma_client@bumble.page.messenger.message.reaction.removed"})},at=function(){return(0,p.jsx)(_.f1,{path:111,pathName:"bma_client@bumble.page.messenger.message.reaction.removed_by_you"})},ct=function(e){var t=e.text,r=e.preview,n=e.isSystem,o=e.actions,i=e.qaRole,s=e.customText,a=e.reaction,c=void 0!==o&&o.length>0,l=u()({"message-bubble":!0,"is-system":n||c,"has-actions":c,"has-reaction-emoji":null==a?void 0:a.emoji});return(0,p.jsxs)("div",{className:l,"data-qa-role":i,children:[t?(0,p.jsx)("div",{className:"message-bubble__text",dir:"auto",children:(0,p.jsx)(H.P1,{isDangerous:!0,hasBreakWords:!0,children:t})}):null,s?(0,p.jsx)("div",{className:"message-bubble__text",dir:"auto",children:(0,p.jsx)(H.P1,{hasBreakWords:!0,children:s})}):null,r?(0,p.jsx)("div",{className:"message-bubble__preview",children:r}):null,o&&c?(0,p.jsx)("div",{className:"message-bubble__actions",children:o.map((function(e,t){return(0,p.jsx)("div",{className:u()({"message-bubble__action":!0,"is-disabled":e.isDisabled}),onClick:e.onClick,role:"button",children:(0,p.jsx)("div",{className:"message-bubble__action-text",children:(0,p.jsx)(H.P1,{hasEllipsis:!0,weight:e.isPrimary?H.fs.MEDIUM:void 0,color:e.isPrimary&&!e.isDisabled?H.d9.PRIMARY:H.d9.GRAY_DARK,children:e.text})})},"message-bubble-".concat(t))}))}):null,a&&(0,p.jsx)("div",{className:"message-bubble__reaction",children:(0,p.jsx)(Ne,{emoji:a.emoji,text:a.text})})]})},lt=function(e){var t=e.question,r=e.answer,n=e.reaction;return(0,p.jsxs)("div",{className:u()("message-question",{"has-reaction-text":null==n?void 0:n.text,"has-reaction-emoji":null==n?void 0:n.emoji}),children:[(0,p.jsx)("div",{className:"message-question__question",children:(0,p.jsx)(H.P3,{hasBreakWords:!0,color:H.d9.BLACK,children:t})}),(0,p.jsx)("div",{className:"message-question__answer",children:(0,p.jsx)(H.P1,{hasBreakWords:!0,weight:H.fs.MEDIUM,color:H.d9.BLACK,children:r})}),n&&(0,p.jsx)("div",{className:"message-question__reaction",children:(0,p.jsx)(Ne,{emoji:n.emoji,text:n.text})})]})};function ut(e){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ut(e)}function pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ft(n.key),n)}}function ft(e){var t=function(e,t){if("object"!==ut(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ut(t)?t:String(t)}function ht(e,t){return ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ht(e,t)}function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=vt(e);if(t){var o=vt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ut(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mt(e)}(this,r)}}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(e){return vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vt(e)}var yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ht(e,t)}(i,e);var t,r,n,o=dt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(mt(t)),t}return t=i,r=[{key:"render",value:function(){var e,t,r,n,o,i,s=this.props,a=s.message,c=s.senderName,l=s.isOwn,u=a.reaction,f=null==u?void 0:u.reaction_element,h=null==f?void 0:f.photo,d=null==f?void 0:f.profile_field,m=null==h?void 0:h.large_photo_size,v=(0,Re.pw)(m,P.Ue,P.Ik),y=null==h?void 0:h.large_url,g=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").startsWith("blob:")}(y)?y:h&&this.getPreviewUrl(h);return g?(0,p.jsx)(Be,{reaction:{emoji:null===(e=a.reaction)||void 0===e?void 0:e.emoji,text:null===(t=a.reaction)||void 0===t?void 0:t.text},aspectRatio:v.aspectRatio,image:g}):d?(0,p.jsx)(lt,{reaction:{emoji:null===(r=a.reaction)||void 0===r?void 0:r.emoji,text:null===(n=a.reaction)||void 0===n?void 0:n.text},question:d.name,answer:d.display_value}):(0,p.jsx)(ct,{reaction:{emoji:null===(o=a.reaction)||void 0===o?void 0:o.emoji,text:null===(i=a.reaction)||void 0===i?void 0:i.text},isSystem:!0,customText:l?st({name:c||""}):at()})}},{key:"getPreviewUrl",value:function(e){return new Je.Z(e.large_url).setSize(P.Ue,P.Ik).getUrl()}}],r&&pt(t.prototype,r),n&&pt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.PureComponent);var gt=(0,o.$j)(null,(function(e){return{actions:(0,i.DE)({showDialog:C.vC,sendChatMessageAction:P.qQ},e),hotpanel:(0,i.DE)({click:O.V4,viewEnlargedPhoto:O.Mv},e)}}))(yt),bt=(r(7023759947),{get lxJan(){return x.Z.get(380)},get lxFeb(){return x.Z.get(379)},get lxMar(){return x.Z.get(383)},get lxApr(){return x.Z.get(376)},get lxMay(){return x.Z.get(384)},get lxJun(){return x.Z.get(382)},get lxJul(){return x.Z.get(381)},get lxAug(){return x.Z.get(377)},get lxSep(){return x.Z.get(387)},get lxOct(){return x.Z.get(386)},get lxNov(){return x.Z.get(385)},get lxDec(){return x.Z.get(378)},get lxSignDay(){return x.Z.get(632)},get lxSignMonth(){return x.Z.get(633)},get lxSignYear(){return x.Z.get(634)},get lxCallAgain(){return(0,p.jsx)(_.f1,{path:123,pathName:"bma_client@bumble.page.messenger.video_chat_message.call_again"})},get lxCallBack(){return(0,p.jsx)(_.f1,{path:124,pathName:"bma_client@bumble.page.messenger.video_chat_message.call_back"})}}),_t=function(e){var t=e.text,r=e.date,n=e.isSuccessful;return(0,p.jsxs)("div",{className:"chat-message-bubble-call",children:[(0,p.jsx)("div",{className:"chat-message-bubble-call__text",children:(0,p.jsx)(H.P1,{color:n?H.d9.BLACK:H.d9.GENERIC_RED,children:t})}),(0,p.jsx)("div",{className:"chat-message-bubble-call__date",children:(0,p.jsx)(H.P1,{color:H.d9.GRAY_DARK,children:r})})]})};function xt(e){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(e)}function jt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pt(n.key),n)}}function Pt(e){var t=function(e,t){if("object"!==xt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xt(t)?t:String(t)}function St(e,t){return St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},St(e,t)}function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ct(e);if(t){var o=Ct(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===xt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kt(e)}(this,r)}}function kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ct(e){return Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ct(e)}var Et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&St(e,t)}(i,e);var t,r,n,o=wt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(kt(t)),t.months=[bt.lxJan,bt.lxFeb,bt.lxMar,bt.lxApr,bt.lxMay,bt.lxJun,bt.lxJul,bt.lxAug,bt.lxSep,bt.lxOct,bt.lxNov,bt.lxDec],t}return t=i,r=[{key:"getMessageText",value:function(){var e=this.props.message.videoCallMsgInfo;return null==e?void 0:e.status_messages[0].text}},{key:"getMessageDateTime",value:function(){var e=this.props.message.videoCallMsgInfo;return this.isCallSuccessful()&&(null==e?void 0:e.duration)?this.formatDuration(e.duration):this.formatDateCreated(this.props.message.dateCreated)}},{key:"getMessageActions",value:function(){return[{text:this.getActionText(),isPrimary:!0,onClick:this.handleActionClick}]}},{key:"getActionText",value:function(){return this.isCallSuccessful()||this.props.isOwn?bt.lxCallAgain:bt.lxCallBack}},{key:"handleActionClick",value:function(){var e=this.props,t=e.callState,r=e.message,n=e.activeChat,o=e.hotpanel,i=e.actions,s=r.videoCallMsgInfo,a=2===(null==s?void 0:s.redial_type);t||(o.clickEvent({element:375,screenName:20}),i.startVideoChat(n.chat_user,a))}},{key:"formatDuration",value:function(e){var t=Math.floor(e/60),r=Math.floor(e%60),n=r<10?"0".concat(String(r)):r;return"".concat(t,":").concat(n," mins")}},{key:"formatDateCreated",value:function(e){var t=new Date(1e3*e),r=t.getDate(),n=t.getMonth(),o=t.getHours(),i=t.getMinutes();return o<10&&(o="0".concat(String(o))),i<10&&(i="0".concat(String(i))),"".concat(r," ").concat(this.months[n],", ").concat(o,":").concat(i)}},{key:"isCallSuccessful",value:function(){var e=this.props.message.videoCallMsgInfo;return 1===(null==e?void 0:e.status_messages[0].status)}},{key:"render",value:function(){return(0,p.jsx)(ct,{customText:(0,p.jsx)(_t,{text:this.getMessageText(),date:this.getMessageDateTime(),isSuccessful:this.isCallSuccessful()}),isSystem:!0,actions:this.getMessageActions()})}}],r&&jt(t.prototype,r),n&&jt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.Component),Ot=(0,o.$j)((function(e){return{activeChat:e.messenger.chat.activeChat,callState:e.videoChat.callState}}),(function(e){return{actions:(0,i.DE)({startVideoChat:S.gd},e),hotpanel:(0,i.DE)({clickEvent:O.Q5},e)}}))(Et),Rt=function(e){var t=e.text;return(0,p.jsx)(ct,{isSystem:!0,preview:(0,p.jsxs)("div",{className:"chat-message-icebreaker",children:[(0,p.jsx)("div",{className:"chat-message-icebreaker__icon",children:(0,p.jsx)(V.ZP,{name:"generic-icebreaker",size:V.Jh.MEDIUM})}),(0,p.jsx)("span",{className:"chat-message-icebreaker__text",children:t})]}),qaRole:"chat-message-icebreaker"})};function Mt(e){var t=e.url,r=e.domain,n=e.title,o=e.description,i=e.image,s=e.onClick,a=e.onImageClick;return(0,p.jsxs)("a",{className:"message-bubble-preview",href:t,target:"_blank",rel:"noopener noreferrer",onClick:s,children:[i?(0,p.jsx)("div",{className:"message-bubble-preview__image",style:{backgroundImage:"url(".concat(i,")")},onClick:a}):null,n?(0,p.jsx)("div",{className:"message-bubble-preview__title",dir:"auto",children:(0,p.jsx)(H.P1,{isDangerous:!0,weight:H.fs.MEDIUM,children:n})}):null,o?(0,p.jsx)("div",{className:"message-bubble-preview__description",dir:"auto",children:(0,p.jsx)(H.P3,{isDangerous:!0,children:o})}):null,(0,p.jsx)("div",{className:"message-bubble-preview__domain",dir:"auto",children:(0,p.jsx)(H.P3,{children:r})})]})}var Tt,Nt,It,Dt,At,Ut=function(e){var t=e.text,r=e.preview;return(0,p.jsx)(ct,{text:t,preview:(0,p.jsx)(Mt,{url:r.url,title:r.title,description:r.description,image:r.image,domain:r.domain,onClick:r.onClick,onImageClick:r.onImageClick})})},Lt={get lxStatusFailed(){return(0,p.jsx)(_.f1,{path:417,pathName:"bma_client@messenger.message.failed",children:"Failed to send"})},get lxStatusDecline(){return(0,p.jsx)(_.f1,{path:44,pathName:"bma_client@app.messenger.message-item.status.decline",children:"Decline"})},get lxStatusReport(){return(0,p.jsx)(_.f1,{path:45,pathName:"bma_client@app.messenger.message-item.status.report",children:"Report"})},get lxStatusConfirmSend(){return(0,p.jsx)(_.f1,{path:43,pathName:"bma_client@app.messenger.message-item.status.confirm-send",children:"Click to resend"})}};function Bt(e){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bt(e)}function Zt(e,t,r,n){var o={configurable:!0,enumerable:!0};return o[e]=n,Object.defineProperty(t,r,o)}function Ft(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Bt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Bt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.DELIVERED="DELIVERED",e.CONFIRM_SEND="CONFIRM_SEND",e.DECLINE="DECLINE",e.ERROR="ERROR",e.REPORT="REPORT"}(At||(At={}));var Gt,Vt=(Ft(Tt={},At.DELIVERED,"message__status--info"),Ft(Tt,At.CONFIRM_SEND,"message__status--info"),Ft(Tt,At.DECLINE,"message__status--error"),Ft(Tt,At.ERROR,"message__status--error"),Ft(Tt,At.REPORT,"message__status--info"),Tt),zt=(Ft(Nt={},At.DELIVERED,void 0),Ft(Nt,At.CONFIRM_SEND,"chat-action-tap"),Ft(Nt,At.DECLINE,"chat-action-forbidden"),Ft(Nt,At.ERROR,void 0),Ft(Nt,At.REPORT,"chat-action-report"),Nt),qt=(Zt("get",It={},At.DELIVERED,(function(){return"Delivered"})),Zt("get",It,At.CONFIRM_SEND,(function(){return Lt.lxStatusConfirmSend})),Zt("get",It,At.DECLINE,(function(){return Lt.lxStatusDecline})),Zt("get",It,At.ERROR,(function(){return Lt.lxStatusFailed})),Zt("get",It,At.REPORT,(function(){return Lt.lxStatusReport})),It);!function(e){e.SYSTEM="SYSTEM"}(Gt||(Gt={}));var Ht,Wt=Ft({},Gt.SYSTEM,"system");!function(e){e.INCOMING="INCOMING",e.OUTGOING="OUTGOING"}(Ht||(Ht={}));var Jt=(Ft(Dt={},Ht.INCOMING,"message--in"),Ft(Dt,Ht.OUTGOING,"message--out"),Dt),Yt=function(e){var t=e.type,r=e.direction,n=e.status,o=e.hasError,i=e.children,s=e.isPending,a=e.isLastInGroup,c={block:u()({message:!0,"is-pending":s,"message--last":a,"has-error":o},void 0!==r?Jt[r]:null,void 0!==t?Wt[t]:null),status:u()({message__status:!0},void 0!==n&&Vt[n.level],void 0!==n&&void 0!==n.onClick&&"message__status--action")},l=n&&n.level&&zt[n.level]?(0,p.jsx)("div",{className:"message__status-icon",children:(0,p.jsx)(V.ZP,{name:zt[n.level],size:V.Jh.XSMALL})}):null;return(0,p.jsxs)("div",{className:c.block,children:[(0,p.jsx)("div",{className:"message__content-wrap",children:(0,p.jsx)("div",{className:"message__content",children:i})}),n?(0,p.jsxs)("div",{className:c.status,onClick:n.onClick,children:[l,(0,p.jsx)("div",{className:"message__status-text",children:(0,p.jsx)(H.P3,{children:n.text||qt[n.level]})})]}):null]})},$t=r(2788547217),Qt=r(967988868),Xt=r(4228447093),Kt={get lxVerifyMe(){return(0,p.jsx)(_.f1,{path:122,pathName:"bma_client@bumble.page.messenger.verify_me"})},get lxTellMeMore(){return(0,p.jsx)(_.f1,{path:121,pathName:"bma_client@bumble.page.messenger.tell_me_more"})},get lxPrivateTitle(){return(0,p.jsx)(_.f1,{path:120,pathName:"bma_client@bumble.page.messenger.private.title"})},get lxPrivateDescription(){return(0,p.jsx)(_.f1,{path:114,pathName:"bma_client@bumble.page.messenger.private.description"})},get lxPrivateMainCta(){return(0,p.jsx)(_.f1,{path:115,pathName:"bma_client@bumble.page.messenger.private.main_cta_text"})},get lxPrivateCancelCta(){return(0,p.jsx)(_.f1,{path:113,pathName:"bma_client@bumble.page.messenger.private.cancel_cta_text"})},getLxPrivateMessageReportedPhoto:function(e){return x.Z.get(117,e)},get lxPrivateReportTitle(){return x.Z.get(119)}},er=r(1636386760),tr=(r(3463123597),r(6803277619),r(670651856),function(e){var t=e.bars,r=void 0===t?[]:t,n=e.percentage,o=void 0===n?0:n,i=parseInt("2px".replace(/px$/,""),10),s=i,a=parseInt("16px".replace(/px$/,""),10),c=parseFloat("1px".replace(/px$/,"")),l=parseInt("1px".replace(/px$/,""),10),u=i*r.length+l*(r.length-1),f=a,h="".concat(o,"%"),d=Math.random().toString(36).substr(2,10);return(0,p.jsxs)("svg",{width:u,height:f,viewBox:"0 0 ".concat(u," ").concat(f),children:[(0,p.jsx)("defs",{children:(0,p.jsxs)("clipPath",{id:"".concat(d,"-mask"),children:[" ",r.map((function(e,t){var r=s+(a-s)*e/7;return(0,p.jsx)("rect",{x:(i+l)*t,y:a-r,width:i,height:r,rx:c,ry:c},"".concat(d,"-").concat(t))}))]})}),(0,p.jsxs)("g",{clipPath:"url(#".concat(d,"-mask)"),children:[(0,p.jsx)("rect",{x:"0",y:"0",width:"100%",height:a,fill:"currentColor",fillOpacity:"0.4"}),(0,p.jsx)("rect",{x:"0",y:"0",width:h,height:a,fill:"currentColor"})]})]})}),rr=function(e){var t=e.isLoading,r=e.src,n=e.onClick,o=e.duration,i=e.isPlaying,s=e.audioRef,a=e.bars,c=e.percentage,l=void 0===c?0:c,f=u()({"message-audio":!0,"is-loading":t,"is-playing":i});return(0,p.jsxs)("div",{className:f,children:[(0,p.jsx)("audio",{src:r,controls:!1,hidden:!0,ref:s}),t?(0,p.jsx)("div",{className:"message-audio__control",children:(0,p.jsx)(L.ZP,{size:L.gI.SMALL})}):(0,p.jsx)("div",{className:"message-audio__control",onClick:n,role:"button",children:(0,p.jsx)(V.ZP,{name:i?"generic-media-pause":"generic-media-play",size:V.Jh.MEDIUM})}),(0,p.jsx)("div",{className:"message-audio__oscillator",children:(0,p.jsx)(tr,{bars:a,percentage:l})}),(0,p.jsx)("div",{className:"message-audio__duration",children:(0,p.jsx)(H.P2,{children:o||"00:00"})})]})},nr=r(7956760907);function or(e){return or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},or(e)}function ir(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sr(n.key),n)}}function sr(e){var t=function(e,t){if("object"!==or(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==or(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===or(t)?t:String(t)}function ar(e,t){return ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ar(e,t)}function cr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ur(e);if(t){var o=ur(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===or(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lr(e)}(this,r)}}function lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ur(e){return ur=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ur(e)}var pr=[4,6,4,7,4,0,0,7,7,4,4,4,4,7,7,1,7,7,4,4,7,7,4,7,7,6.5,4.5,4.5,3,0,0,0,0,0,0,0,0],fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ar(e,t)}(a,e);var t,r,o,i=cr(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).audioRef=(0,n.createRef)(),(0,s.Z)(lr(t)),t.timer=new(m())(t.handleTimer,lr(t),500),t.state={isLoading:!0,wasPaused:!1,progress:0},t}return t=a,r=[{key:"componentDidMount",value:function(){var e,t;null===(e=this.audioRef.current)||void 0===e||e.addEventListener("canplay",this.handleCanPlay),null===(t=this.audioRef.current)||void 0===t||t.addEventListener("ended",this.handleAudioEnded)}},{key:"componentWillUnmount",value:function(){var e,t,r;null===(e=this.audioRef.current)||void 0===e||e.removeEventListener("canplay",this.handleCanPlay),null===(t=this.audioRef.current)||void 0===t||t.removeEventListener("ended",this.handleAudioEnded),this.props.playingMessageUid===this.props.message.uid&&(null===(r=this.audioRef.current)||void 0===r||r.pause(),this.timer.clear())}},{key:"componentDidUpdate",value:function(e){var t,r,n=this.props,o=n.message,i=n.playingMessageUid;o.uid===i&&o.uid!==e.playingMessageUid?(null===(t=this.audioRef.current)||void 0===t||t.play(),this.timer.set()):o.uid!==i&&o.uid===e.playingMessageUid&&(null===(r=this.audioRef.current)||void 0===r||r.pause(),this.timer.clear())}},{key:"handleTimer",value:function(){var e,t,r=(null===(e=this.audioRef.current)||void 0===e?void 0:e.currentTime)||0,n=(null===(t=this.audioRef.current)||void 0===t?void 0:t.duration)||0,o=Math.floor(100*r/n);this.setState({progress:o}),this.timer.set()}},{key:"handleCanPlay",value:function(){this.setState({isLoading:!1})}},{key:"handleAudioEnded",value:function(){this.props.actions.setPlayingMessageUid(""),this.setState({progress:100,wasPaused:!1})}},{key:"render",value:function(){var e=this.props,t=e.message,r=e.playingMessageUid,n=t.multimedia.audio,o=this.state,i=o.isLoading,s=o.progress,a=(0,nr.u6)((n.duration_ms||0)/1e3);return(0,p.jsx)(de.Z,{onElementVisible:this.handleAudioMessageVisible,children:(0,p.jsx)(rr,{isLoading:i,duration:a,isPlaying:t.uid===r,src:n.url,audioRef:this.audioRef,onClick:this.handleClick,percentage:s,bars:pr})})}},{key:"handleClick",value:function(){var e=this.state.wasPaused,t=this.props,r=t.message,n=t.playingMessageUid,o=this.props.isOwn?1202:1203;r.uid===n?(this.props.actions.setPlayingMessageUid(""),this.props.hotpanel.click(741,o),this.setState({wasPaused:!0})):(e?this.props.hotpanel.click(742,o):this.props.hotpanel.click(1134,o),this.props.actions.setPlayingMessageUid(r.uid))}},{key:"handleAudioMessageVisible",value:function(){this.props.hotpanel.viewElement(1201)}}],r&&ir(t.prototype,r),o&&ir(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.PureComponent),hr=(0,o.$j)((function(e){return{playingMessageUid:e.messenger.chat.playingMessageUid}}),(function(e){return{actions:(0,i.DE)({setPlayingMessageUid:P.HH},e),hotpanel:(0,i.DE)({viewElement:O.Ye,click:O.V4},e)}}))(fr),dr=r(7688111619),mr=r(8282233115),vr=function(e){var t=e.src,r=e.onClick,o=e.isMuted,i=void 0===o||o,s=e.videoRef,a=e.progress,c=void 0===a?0:a,l=e.autoPlay,f=e.loop,h=e.onClickVolume,d=u()({"message-video-telescope":!0,"is-clickable":r&&t}),m=parseInt("216px".replace(/px$/,""),10),v=parseInt("4px".replace(/px$/,""),10);return(0,p.jsxs)("div",{className:d,onClick:r,children:[t?(0,p.jsxs)(n.Fragment,{children:[(0,p.jsx)("div",{className:"message-video-telescope__content",children:(0,p.jsx)("video",{src:t,className:"message-video-telescope__video",muted:i,ref:s,autoPlay:l,loop:f})}),(0,p.jsx)("div",{className:"message-video-telescope__progress",children:(0,p.jsx)(dr.ZP,{shadowWidth:0,percent:c,color:mr.xC.EXPIRED,radius:(m-v)/2,barWidth:v})}),(0,p.jsx)("div",{className:"message-video-telescope__mute-indicator",onClick:h,role:"button",children:(0,p.jsx)(V.ZP,{size:V.Jh.SMALL,name:i?"generic-media-volume-off":"generic-media-volume-on",color:V.EY.Mono.WHITE})})]}):null,!t&&(0,p.jsx)(L.ZP,{size:L.gI.MEDIUM})]})};function yr(e){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(e)}function gr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,br(n.key),n)}}function br(e){var t=function(e,t){if("object"!==yr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===yr(t)?t:String(t)}function _r(e,t){return _r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_r(e,t)}function xr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Pr(e);if(t){var o=Pr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===yr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jr(e)}(this,r)}}function jr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pr(e){return Pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pr(e)}var Sr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_r(e,t)}(a,e);var t,r,o,i=xr(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).videoRef=(0,n.createRef)(),(0,s.Z)(jr(t)),t.timer=new(m())(t.handleTimer,jr(t),300),t.state={progress:0},t}return t=a,r=[{key:"componentDidMount",value:function(){this.timer.set()}},{key:"componentWillUnmount",value:function(){this.props.message.uid===this.props.playingMessageUid&&this.props.actions.setPlayingMessageUid(""),this.timer.clear()}},{key:"handleTimer",value:function(){var e,t,r=(null===(e=this.videoRef.current)||void 0===e?void 0:e.currentTime)||0,n=(null===(t=this.videoRef.current)||void 0===t?void 0:t.duration)||0,o=Math.floor(100*r/n);this.setState({progress:o}),this.timer.set()}},{key:"render",value:function(){var e=this.props,t=e.message,r=e.playingMessageUid,n=t.multimedia.photo.video,o=this.state.progress;return(0,p.jsx)(de.Z,{onElementVisible:this.handleAudioMessageVisible,children:(0,p.jsx)(vr,{isMuted:t.uid!==r,progress:o,src:n.url,videoRef:this.videoRef,onClick:this.handleClick,autoPlay:!0,loop:!0})})}},{key:"handleClick",value:function(){var e=this.props,t=e.isOwn,r=e.message,n=e.playingMessageUid,o=r.uid===n;o?this.props.actions.setPlayingMessageUid(""):this.props.actions.setPlayingMessageUid(r.uid);var i=o?1222:1226,s=t?1224:1225;this.props.hotpanel.click(i,s)}},{key:"handleAudioMessageVisible",value:function(){this.props.isOwn?this.props.hotpanel.viewElement(1224):this.props.hotpanel.viewElement(1201)}}],r&&gr(t.prototype,r),o&&gr(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.PureComponent),wr=(0,o.$j)((function(e){return{playingMessageUid:e.messenger.chat.playingMessageUid}}),(function(e){return{actions:(0,i.DE)({setPlayingMessageUid:P.HH},e),hotpanel:(0,i.DE)({viewElement:O.Ye,click:O.V4},e)}}))(Sr);function kr(e){return kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kr(e)}function Cr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Er(n.key),n)}}function Er(e){var t=function(e,t){if("object"!==kr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==kr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===kr(t)?t:String(t)}function Or(e,t){return Or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Or(e,t)}function Rr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Tr(e);if(t){var o=Tr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===kr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Mr(e)}(this,r)}}function Mr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tr(e){return Tr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tr(e)}var Nr,Ir=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Or(e,t)}(i,e);var t,r,n,o=Rr(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(Mr(t)),t}return t=i,(r=[{key:"getStatusActions",value:function(e){var t,r,n=e.message,o=e.isOwn,i=e.hasError,s=e.errorType,a=e.onRetry;return i?(r=a,t=91===s?At.CONFIRM_SEND:At.ERROR):o||19!==n.messageType||n.isDeclined||n.isOffensive||(n.isMasked?(t=At.DECLINE,r=this.handleDeclinePhotoClick.bind(this,n)):this.props.isNewReportingFlow||(t=At.REPORT,r=this.handleReportPhotoClick.bind(this,n))),{statusLevel:t,onStatusClick:r}}},{key:"render",value:function(){var e=this.props,t=e.status,r=e.isOwn,n=e.isLast,o=e.onRetry,i=e.onMessageVisible,s=e.message,a=e.errorType,c=t===g.z2,l=this.getStatusActions({message:s,isOwn:r,hasError:c,errorType:a,onRetry:o}),u=l.statusLevel,f=l.onStatusClick;return(0,p.jsx)(de.Z,{onElementVisible:i,children:(0,p.jsx)(Yt,{direction:r?Ht.OUTGOING:Ht.INCOMING,hasError:c,isPending:t===g.XP,isLastInGroup:n,status:u?{level:u,onClick:f}:void 0,children:this.getContent(a)})})}},{key:"getContent",value:function(e){var t,r=this.props,n=r.status,o=r.message,i=r.isOwn,s=r.isPromoPartner,a=r.urlInfo,c=r.userId,l=r.senderName;if(o.isDeclined||o.isOffensive){var u=Kt.getLxPrivateMessageReportedPhoto({num:1});return(0,p.jsx)(ct,{isSystem:!0,text:u})}var f=(0,g.UD)(o);switch(o.messageType){case 36:return(0,p.jsx)(Oe,{message:o});case 37:return o.toPersonId===c?(0,p.jsx)(ct,{text:f,actions:[{text:Kt.lxVerifyMe,onClick:this.isVerified()?void 0:this.handleOpenVerification,isPrimary:!0,isDisabled:this.isVerified()},{text:Kt.lxTellMeMore,onClick:this.handleVerificationShowMeMore}]}):(0,p.jsx)(ct,{isSystem:!0,text:f});case 38:case 45:return(0,p.jsx)(ct,{isSystem:!0,text:f});case 52:return(0,p.jsx)(gt,{message:o,isOwn:i,senderName:l});case 19:var h=o.multimedia;return(null==h?void 0:h.audio)&&3===h.format?(0,p.jsx)(hr,{message:o,isOwn:i}):(null===(t=null==h?void 0:h.photo)||void 0===t?void 0:t.video)&&4===h.format?(0,p.jsx)(wr,{message:o,isOwn:i}):(0,p.jsx)(it,{message:o,errorType:e,userId:c});case 50:return(0,p.jsx)(Rt,{text:f});case 32:return(0,p.jsx)(Ot,{message:o,isOwn:i})}var d,m=!i,v=m?b.mD:void 0;return f&&(d=n===g.x5?f:(0,$t.hU)(f)),d&&(d=s&&!i?(0,b.dR)(d):(0,b.St)(d,v)),a?(0,p.jsx)(Ut,{text:d,preview:Object.assign(Object.assign({},a),{title:a.title?(0,b.iD)((0,b.PI)(a.title)):void 0,description:a.description?(0,b.iD)((0,b.PI)(a.description)):void 0,onClick:m?this.handlePreviewClick:void 0,onImageClick:m?this.handlePreviewImageClick:void 0})}):(0,p.jsx)(ct,{text:d})}},{key:"handleDeclinePhotoClick",value:function(e,t){var r=this;t.preventDefault(),t.stopPropagation(),this.props.hotpanel.click(1266),this.props.actions.showDialog(ee.a,{title:Kt.lxPrivateTitle,message:Kt.lxPrivateDescription,ctaText:Kt.lxPrivateMainCta,secondCTAText:Kt.lxPrivateCancelCta,onClickAction:function(){r.props.hotpanel.click(288,1268),e.fromPersonId&&e.uid&&r.props.actions.submitPhotoReport(e.fromPersonId,[e.uid],10,(function(t){if(t.success){r.props.actions.updateConversationSection();var n=t.promo;n&&r.showBlockUserDialog(n,e.fromPersonId)}}))},onClickSecondary:function(){r.props.hotpanel.click(113,1268),r.props.actions.hideDialog()}})}},{key:"handleReportPhotoClick",value:function(e,t){var r=this;t.preventDefault(),t.stopPropagation();var n=3;e.hasLewdPhoto&&(n=4),this.props.hotpanel.click(511),this.props.actions.showDialog(te.U,{assetType:n,userId:e.fromPersonId,gameMode:this.props.gameMode,clientSource:10,blockingRequired:!1,title:Kt.lxPrivateReportTitle,messagesIds:[e.uid],reportType:13,needDeleteUser:!1,onReportActionDone:function(t){r.props.actions.updateConversationSection();var n=e.fromPersonId;t&&n&&r.showBlockUserDialog(t,n)}},{isLocal:!0})}},{key:"handlePreviewClick",value:function(){this.props.hotpanel.click(1170,1172)}},{key:"handlePreviewImageClick",value:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.props.hotpanel.click(1171,1172)}},{key:"handleOpenVerification",value:function(){this.props.hotpanel.click(378,379),this.props.hotpanel.sendStartVerifyAccount(5,11),this.props.actions.showDialog(Qt.M,{context:10})}},{key:"handleVerificationShowMeMore",value:function(){this.props.hotpanel.click(331,379),this.props.actions.showDialog(Xt.Y,{clientSource:10})}},{key:"isVerified",value:function(){var e=(0,er.p)(this.props.verifiedInformation);return(0,er.Ai)(e)===er.$Z.VERIFIED}},{key:"showBlockUserDialog",value:function(e,t){var r=this,n=e.buttons||[],o=n.find((function(e){return 1===e.type})),i=n.find((function(e){return 2===e.type}));this.props.hotpanel.viewElement(518);var s=e.promo_block_type;s&&this.props.hotpanel.viewBanner(s,e.promo_block_position,e.context);var a=function(t){s&&r.props.hotpanel.clickBanner({bannerId:s,positionId:e.promo_block_position,callToActionType:t,context:e.context})};this.props.actions.showDialog(ee.a,{title:e.header,message:e.mssg,ctaText:o&&o.text,secondCTAText:i&&i.text,onClickAction:function(){r.props.hotpanel.click(197,518),a(1),r.props.actions.blockUser(t,10,(function(){r.props.actions.removeUserFromSections(t),r.props.actions.openNextUser(),r.props.actions.updateConversationSection()}))},onClickSecondary:function(){r.props.hotpanel.click(65,518),a(2),r.props.actions.hideDialog()}})}}])&&Cr(t.prototype,r),n&&Cr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.Component),Dr=(0,o.$j)((function(e,t){var r,n;return{userId:e.user.id,gameMode:e.user.gameMode,verifiedInformation:e.user.verifiedInformation,senderName:t.isOwn?null===(n=null===(r=e.messenger.chat.activeChat)||void 0===r?void 0:r.chat_user)||void 0===n?void 0:n.name:e.user.name,isNewReportingFlow:(0,B.t)(Z.Dp,e.app.commonSettings)}}),(function(e){return{actions:(0,i.DE)({showDialog:C.vC,hideDialog:C.Wr,submitPhotoReport:P.$b,blockUser:K.rf,removeUserFromSections:w.QM,openNextUser:K.v4,updateConversationSection:w.Bd},e),hotpanel:(0,i.DE)({click:O.V4,clickBanner:O.IF,viewBanner:O.F,viewElement:O.Ye,sendStartVerifyAccount:O.U4},e)}}))(Ir),Ar=r(5204122330);function Ur(e){return Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ur(e)}function Lr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ur(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ur(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Br=(Lr(Nr={},mr.I1.AVERAGE_TIME,"expiration-status-average"),Lr(Nr,mr.I1.EXPIRED_TIME,"expiration-status-expired"),Lr(Nr,mr.I1.EXTENDED_TIME,"expiration-status-extended"),Lr(Nr,mr.I1.LOW_TIME,"expiration-status-low"),Nr),Zr=function(e){var t=e.expirationStatus,r=void 0===t?mr.I1.AVERAGE_TIME:t,n=e.description,o=e.media,i=e.title,s=e.qaRole,a=e.actions,c=u()({"messages-notice":!0},void 0!==r&&Br[r]);return(0,p.jsxs)("article",{className:c,"data-qa-role":s,children:[(0,p.jsxs)("header",{className:"message-notice__header",children:[o&&(0,p.jsx)("div",{className:"messages-notice__media",role:"presentation",children:o}),i&&(0,p.jsx)("div",{className:"messages-notice__title",children:(0,p.jsx)(H.R6,{tag:H.rh.H3,color:H.d9.BLACK,children:i})}),(0,p.jsx)("div",{className:"messages-notice__description",children:(0,p.jsx)(H.P1,{tag:H.rh.P,children:n})})]}),a&&(0,p.jsx)("div",{className:"messages-notice__actions",children:a})]})},Fr={get lxIntroYourself(){return(0,p.jsx)(_.f1,{path:465,pathName:"bma_client@pages.messenger.messages.notice.introduce_yourself"})},getLxWaitingResponse:function(e){return x.Z.get(466,e)},getLxYouWaitingFemale:function(e){return(0,p.jsx)(_.f1,{path:469,params:e,pathName:"bma_client@pages.messenger.messages.notice.you_waiting_response.female"})},getLxYouWaitingMale:function(e){return(0,p.jsx)(_.f1,{path:470,params:e,pathName:"bma_client@pages.messenger.messages.notice.you_waiting_response.male"})},get lxYourFirstStep(){return x.Z.get(468)},get lxTimeAlmostUp(){return(0,p.jsx)(_.f1,{path:467,pathName:"bma_client@pages.messenger.messages.notice.times_almost_up"})}},Gr=r(3409119325),Vr=(0,o.$j)((function(e){return{messages:e.messenger.chat.messages,activeChat:e.messenger.chat.activeChat}}))((function(e){var t=e.activeChat,r=e.ownMessagesPresent,n=e.messages,o=t&&t.chat_user,i=(o?(0,Gr.cf)(o.reply_time_left,o):{expirationStatus:void 0}).expirationStatus,s=o?(0,Gr.Dq)(o.reply_time_left):{days:0,hours:0,minutes:0},a=s.days,c=s.hours,l=s.minutes,u=(0,b.ig)(a,c,l),f=1===n.length&&37===n[0].messageType,h=Fr.lxIntroYourself,d=Fr.getLxWaitingResponse({time:u});r?(h=2===(o&&o.gender)?Fr.getLxYouWaitingFemale({time:u}):Fr.getLxYouWaitingMale({time:u}),d=Fr.lxYourFirstStep):c<1&&(h=Fr.lxTimeAlmostUp);return(0,p.jsx)(Zr,{title:!1===f?h:void 0,description:(0,p.jsx)(Ar.Z,{html:d}),expirationStatus:i})})),zr=function(e){var t=e.title,r=e.ctaActionText,n=e.onClick,o=e.onClickInfo;return(0,p.jsxs)("div",{className:"photo-verification-message-notice",children:[(0,p.jsx)("div",{className:"photo-verification-message-notice__text",children:(0,p.jsx)(H.P1,{tag:H.rh.P,color:H.d9.BLACK,children:t})}),(0,p.jsxs)("div",{className:"photo-verification-message-notice__action",children:[(0,p.jsx)("span",{className:"photo-verification-message-notice__action-text",onClick:n,children:r}),(0,p.jsx)("span",{className:"photo-verification-message-notice__action-icon",onClick:o,children:(0,p.jsx)(V.ZP,{name:"generic-information"})})]})]})},qr=r(4529445126),Hr=r(3735248185),Wr=function(e){return x.Z.get(112,e)},Jr=function(e){return x.Z.get(469,e)},Yr=function(e){return x.Z.get(470,e)};function $r(e){return $r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$r(e)}function Qr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xr(n.key),n)}}function Xr(e){var t=function(e,t){if("object"!==$r(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==$r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===$r(t)?t:String(t)}function Kr(e,t){return Kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kr(e,t)}function en(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rn(e);if(t){var o=rn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===$r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tn(e)}(this,r)}}function tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rn(e){return rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rn(e)}var nn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kr(e,t)}(i,e);var t,r,n,o=en(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(tn(t)),t}return t=i,(r=[{key:"componentDidMount",value:function(){var e=this.props.promo,t=e.promo_block_type;t&&this.props.hotpanel.viewBanner(t,e.promo_block_position,this.props.clientSource)}},{key:"componentDidUpdate",value:function(e){!1===e.isVerificationRequestSent&&!0===this.props.isVerificationRequestSent&&this.reloadChat()}},{key:"render",value:function(){var e=this.props,t=e.chatUser,r=e.promo,n=e.ownMessagesPresent,o=r.buttons,i=(void 0===o?[]:o)[0],s=t?(0,Gr.Dq)(t.reply_time_left):{},a=s.days,c=void 0===a?0:a,l=s.hours,u=void 0===l?0:l,f=s.minutes,h=void 0===f?0:f,d=(0,b.ig)(c,u,h),m=Wr({time:d});return n&&t&&(m=2===t.gender?Jr({time:d}):Yr({time:d})),(0,p.jsx)(zr,{title:(0,p.jsx)(Ar.Z,{html:m}),ctaActionText:i.text||"",onClick:this.handleAskForPhotoVerification,onClickInfo:this.handleMoreInfoAboutPhotoVerification})}},{key:"handleAskForPhotoVerification",value:function(){var e=this,t=this.props.dialogPromo,r=this.props.promo,n=this.props.chatUser,o=n&&n.user_id,i=r.promo_block_type;i&&this.props.hotpanel.clickBanner({bannerId:i,positionId:r.promo_block_position,callToActionType:1,context:this.props.clientSource}),t&&o?this.props.actions.showDialog(qr.K,{promo:t,userId:o,clientSource:this.props.clientSource,onRequestSent:function(){e.reloadChat()}}):o&&this.props.actions.sendPhotoVerificationRequest(o,this.props.clientSource,(function(){e.reloadChat()}))}},{key:"handleMoreInfoAboutPhotoVerification",value:function(e){e.stopPropagation(),this.props.actions.showDialog(Xt.Y,{clientSource:this.props.clientSource})}},{key:"reloadChat",value:function(){var e=this.props.chatUser,t=e&&e.user_id;t&&this.props.actions.fetchChat({userId:t})}}])&&Qr(t.prototype,r),n&&Qr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.Component),on=(0,o.$j)((function(e){return{isVerificationRequestSent:e.photoVerification.isVerificationRequestSent}}),(function(e){return{actions:(0,i.DE)({fetchChat:P.Gg,showDialog:C.vC,sendPhotoVerificationRequest:Hr.mi},e),hotpanel:(0,i.DE)({viewBanner:O.F,clickBanner:O.IF},e)}}))(nn),sn=function(e){var t=e.emoji,r=e.description,n=e.title,o=t?(0,p.jsx)(Te.ZP,{name:Te.id.FALLBACK,glyph:t,size:Te.Su.MEDIUM}):null;return(0,p.jsx)(Zr,{title:n,description:(0,p.jsx)(Ar.Z,{html:r}),media:o,qaRole:"snooze-mode-messages-notice"})},an={get lxExpiredTitle(){return(0,p.jsx)(_.f1,{path:407,pathName:"bma_client@messenger.expired.title"})},get lxExpiredAction(){return(0,p.jsx)(_.f1,{path:404,pathName:"bma_client@messenger.expired.action"})},get lxExpiredTitleBizz(){return(0,p.jsx)(_.f1,{path:408,pathName:"bma_client@messenger.expired.title.bizz"})},get lxExpiredActionBizz(){return(0,p.jsx)(_.f1,{path:405,pathName:"bma_client@messenger.expired.action.bizz"})},get lxExpiredDescription(){return x.Z.get(406)}},cn=r(6025860130),ln=r(7997157527),un=r(2540363253);function pn(e){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(e)}function fn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hn(n.key),n)}}function hn(e){var t=function(e,t){if("object"!==pn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===pn(t)?t:String(t)}function dn(e,t){return dn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dn(e,t)}function mn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=yn(e);if(t){var o=yn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===pn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vn(e)}(this,r)}}function vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yn(e){return yn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yn(e)}var gn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dn(e,t)}(i,e);var t,r,n,o=mn(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(vn(t)),t.state={isLoading:!1},t}return t=i,r=[{key:"render",value:function(){var e=an.lxExpiredTitle,t=an.lxExpiredAction;5===(this.props.user&&this.props.user.match_mode)&&(e=an.lxExpiredTitleBizz,t=an.lxExpiredActionBizz);var r=(0,p.jsx)(cn.ZP,{text:t,onClick:this.handleRematch,color:mr.lt.Features.REMATCH,isDisabled:this.state.isLoading});return(0,p.jsx)(Zr,{title:e,description:(0,p.jsx)(Ar.Z,{html:an.lxExpiredDescription}),actions:r})}},{key:"handleRematch",value:function(){var e=this.props,t=e.boostEnabled,r=e.isFreeRematch,n=this.props.user&&this.props.user.user_id;this.props.hotpanel.click(296),this.props.boostDisabled?this.props.actions.openBoost({activationPlace:145,context:205,initiatorScreen:void 0}):(this.props.hotpanel.fireRematchEvent({boostEnabled:t,encryptedUserId:n,isFreeRematch:r}),n&&this.props.actions.rematchUser(n),this.setState({isLoading:!0}))}}],r&&fn(t.prototype,r),n&&fn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.Component),bn=(0,o.$j)((function(e){var t=(0,un.Lx)(e);return{boostDisabled:(0,un.PZ)(e)||(0,un.QO)(e)&&(0,un.VQ)(e),boostEnabled:(0,un.$X)(e)||(0,un.C5)(e)||(0,un.Qn)(e),isFreeRematch:t}}),(function(e){return{actions:(0,i.DE)({rematchUser:K.T9,openBoost:ln.ZC},e),hotpanel:(0,i.DE)({click:O.V4,fireRematchEvent:O.bt},e)}}))(gn),_n=(r(4401304538),r(561133308)),xn=r(1624317496),jn=(r(6127958074),function(e){var t=e.children;return(0,p.jsx)("div",{className:"avatar-group",children:n.Children.toArray(t).filter(Boolean).map((function(e,t){return(0,p.jsx)("div",{className:"avatar-group__item",children:e},t)}))})}),Pn=function(e){var t=e.actionList,r=e.expirationStatus,n=void 0===r?mr.I1.AVERAGE_TIME:r,o=e.expirationStatusProgress,i=void 0===o?0:o,s=e.title,a=e.description,c=e.avatarUrls;return(0,p.jsx)(Zr,{expirationStatus:n,media:(0,p.jsx)(jn,{children:void 0!==c&&c.map((function(e,t){return(0,p.jsx)(G.ZP,{size:G.DZ.MEDIUM,photoUrl:e,expirationStatusProgress:(0,p.jsx)(dr.ZP,{percent:i})},"".concat(t))}))}),title:s,description:a,actions:t?(0,p.jsxs)(xn.ZP,{layout:xn.Zu.VERTICAL,children:[void 0!==t.primary&&(0,p.jsx)(cn.ZP,{text:t.primary.text,onClick:t.primary.onClick,qaRole:t.primary.qaRole},"primary"),void 0!==t.secondary&&(0,p.jsx)(cn.ZP,{text:t.secondary.text,onClick:t.secondary.onClick,styling:cn.Sh.TRANSPARENT,qaRole:t.secondary.qaRole},"secondary"),void 0!==t.rematch&&(0,p.jsx)(cn.ZP,{text:t.rematch.text,onClick:t.rematch.onClick,color:mr.xC.REMATCH,qaRole:t.rematch.qaRole},"rematch")]}):null,qaRole:"antighosting-message-notice"})};function Sn(e){return Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(e)}function wn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kn(n.key),n)}}function kn(e){var t=function(e,t){if("object"!==Sn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Sn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Sn(t)?t:String(t)}function Cn(e,t){return Cn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cn(e,t)}function En(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Rn(e);if(t){var o=Rn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Sn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return On(e)}(this,r)}}function On(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rn(e){return Rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rn(e)}var Mn,Tn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cn(e,t)}(i,e);var t,r,n,o=En(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(On(t)),t.state={isLoading:!1},t}return t=i,r=[{key:"componentDidMount",value:function(){this.sendBannerStat()}},{key:"componentDidUpdate",value:function(e){e.promoBanner!==this.props.promoBanner&&this.sendBannerStat()}},{key:"renderAntiGhostingBlock",value:function(e){var t=e.buttons,r={};if(t){var n=t.find((function(e){return 1===e.type})),o=t.find((function(e){return 2===e.type}));n&&(r.primary={text:n.text,onClick:this.handleStopCountDown,qaRole:"antighosting-continue-chat"}),o&&(r.secondary={text:o.text,onClick:this.handleArchiveChat,qaRole:"antighosting-archive-chat"})}var i=0,s=e.pictures||[];1===s.length&&(i=this.getGhostProgress());var a=i&&i<10?mr.I1.LOW_TIME:mr.I1.AVERAGE_TIME,c=Object.keys(r).length>0;return(0,p.jsx)(Pn,{title:e.header,description:e.mssg,avatarUrls:s.map((function(e){return e.display_images})),actionList:c?r:void 0,expirationStatus:a,expirationStatusProgress:i})}},{key:"renderAntiGhostingDeclined",value:function(e){var t=(e.buttons||[]).find((function(e){return 1===e.type})),r={};t&&(r.primary={text:t.text,onClick:this.handleChangeMyMind,qaRole:"antighosting-change-mind"});var n=0,o=e.pictures,i=void 0===o?[]:o;1===i.length&&(n=this.getGhostProgress());var s=n&&n<10?mr.I1.LOW_TIME:mr.I1.AVERAGE_TIME;return(0,p.jsx)(Pn,{title:e.header,description:e.mssg,avatarUrls:i.map((function(e){return e.display_images})),actionList:r,expirationStatus:s,expirationStatusProgress:n})}},{key:"renderAntiGhostingRematch",value:function(e){var t=e.buttons,r=(void 0===t?[]:t).find((function(e){return 1===e.type})),n={};r&&(n.rematch={text:r.text,onClick:this.handleRematchUser,qaRole:"antighosting-rematch"});var o=e.pictures,i=void 0===o?[]:o;return(0,p.jsx)(Pn,{title:e.header,description:e.mssg,avatarUrls:i.map((function(e){return e.display_images})),actionList:n})}},{key:"getGhostProgress",value:function(){var e=this.props.activeChat,t=e&&e.chat_user,r=t&&t.ghost_progress;return r?100-Math.round(100*r.progress/r.goal):0}},{key:"render",value:function(){var e=this.props.promoBanner;switch(e.promo_block_type){case 286:return this.renderAntiGhostingBlock(e);case 372:return this.renderAntiGhostingDeclined(e);case 373:return this.renderAntiGhostingRematch(e)}return null}},{key:"sendBannerStat",value:function(){var e=this.props.promoBanner;if(e.stats_required){var t=e.stats_required,r=(void 0===t?[]:t)[0];r&&this.props.actions.sendBannerStats(r,e,10)}var n=e.promo_block_type;n&&this.props.hotpanel.viewBanner(n,e.promo_block_position,e.context,e.stats_variation_id)}},{key:"handleStopCountDown",value:function(){var e=this,t=this.props.activeChat;this.setState({isLoading:!0});var r=t.chat_user,n=r&&r.user_id;n&&this.props.actions.sendAntiGhosting({chatId:t.chat_instance.uid,continueConversation:!0,userId:n,onDone:function(){e.setState({isLoading:!1})}}),this.sendActiveBannerClickEvent(1)}},{key:"handleArchiveChat",value:function(){var e=this,t=this.props.activeChat;this.setState({isLoading:!0});var r=t.chat_user,n=r&&r.user_id;n&&this.props.actions.sendAntiGhosting({chatId:t.chat_instance.uid,continueConversation:!1,userId:n,onDone:function(){e.setState({isLoading:!1})}}),this.sendActiveBannerClickEvent(2)}},{key:"handleChangeMyMind",value:function(){this.handleStopCountDown(),this.sendActiveBannerClickEvent(1)}},{key:"handleRematchUser",value:function(){var e=this.props,t=e.activeChat,r=e.boostEnabled,n=e.isFreeRematch,o=t.chat_user,i=o&&o.user_id;this.props.boostDisabled?this.props.actions.openBoost({activationPlace:145,context:205,initiatorScreen:void 0}):(this.props.hotpanel.fireRematchEvent({boostEnabled:r,encryptedUserId:i,isFreeRematch:n}),i&&this.props.actions.rematchUser(i),this.setState({isLoading:!0})),this.sendActiveBannerClickEvent(1)}},{key:"sendActiveBannerClickEvent",value:function(e){var t=this.props.promoBanner,r=t.promo_block_type;r&&this.props.hotpanel.clickBanner({bannerId:r,positionId:t.promo_block_position,callToActionType:e,context:t.context,variationId:t.stats_variation_id})}}],r&&wn(t.prototype,r),n&&wn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.PureComponent),Nn=(0,o.$j)((function(e){var t=(0,un.Lx)(e);return{boostDisabled:(0,un.PZ)(e)||(0,un.QO)(e)&&(0,un.VQ)(e),boostEnabled:(0,un.$X)(e)||(0,un.C5)(e)||(0,un.Qn)(e),isFreeRematch:t}}),(function(e){return{actions:(0,i.DE)({sendBannerStats:_n.Nt,sendAntiGhosting:K.YH,rematchUser:K.T9,openBoost:ln.ZC},e),hotpanel:(0,i.DE)({click:O.V4,viewBanner:O.F,clickBanner:O.IF,fireRematchEvent:O.bt},e)}}))(Tn),In=r(8465832175);function Dn(e){return Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dn(e)}function An(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Dn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Dn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Dn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Un=(An(Mn={},mr.I1.EXPIRED_TIME,"expiration-status-expired"),An(Mn,mr.I1.LOW_TIME,"expiration-status-low"),An(Mn,mr.I1.AVERAGE_TIME,"expiration-status-average"),An(Mn,mr.I1.EXTENDED_TIME,"expiration-status-extended"),Mn),Ln=function(e){var t=e.title,r=e.text,n=e.actions,o=e.photoUrl,i=e.expirationStatus,s=void 0===i?mr.I1.AVERAGE_TIME:i,a=e.expirationStatusProgress,c=e.onAvatarClick,l=e.isLoading,f=u()(An({"chat-blocker":!0},Un[s],s));return(0,p.jsxs)("article",{className:f,children:[(0,p.jsxs)(In.XE,{children:[(0,p.jsx)(In.f3,{children:(0,p.jsx)("div",{className:"chat-blocker__avatar",onClick:c,children:(0,p.jsx)(G.ZP,{photoUrl:o,size:G.DZ.LARGE,styling:s===mr.I1.EXPIRED_TIME?G.GD.FADED:void 0,expirationStatusProgress:(0,p.jsx)(dr.ZP,{radius:80,percent:a})})})}),(0,p.jsx)(In.BA,{children:t}),(0,p.jsx)(In.G9,{children:r}),(null==n?void 0:n.length)?(0,p.jsx)(In.eV,{children:(0,p.jsx)(xn.ZP,{layout:xn.Zu.VERTICAL,children:n})}):null]}),l&&(0,p.jsx)("div",{className:"chat-blocker__loader",children:(0,p.jsx)(L.ZP,{shape:L.lA.LOGO,color:L.ux.PRIMARY})})]})},Bn=function(e){var t=e.ctaText,r=e.onClickCta,n=e.onClickInfo;return(0,p.jsx)(cn.ZP,{text:t,onClick:r,styling:cn.Sh.TRANSPARENT,color:mr.xC.VERIFICATION,isNarrow:!0,icon:(0,p.jsx)("span",{className:"chat-blocker-request-verification__cta-icon",onClick:n,children:(0,p.jsx)(V.ZP,{name:"generic-information"})})})};function Zn(e){return Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zn(e)}function Fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zn(n.key),n)}}function zn(e){var t=function(e,t){if("object"!==Zn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Zn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Zn(t)?t:String(t)}function qn(e,t){return qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qn(e,t)}function Hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Jn(e);if(t){var o=Jn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Zn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wn(e)}(this,r)}}function Wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jn(e){return Jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jn(e)}var Yn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qn(e,t)}(i,e);var t,r,n,o=Hn(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(Wn(t)),t.state={isLoading:!1},t}return t=i,r=[{key:"componentDidMount",value:function(){this.trackChatScreen()}},{key:"componentDidUpdate",value:function(e){e.boostEnabled!==this.props.boostEnabled&&this.reloadChat(),this.props.activeChat.chat_instance.uid!==e.activeChat.chat_instance.uid&&this.trackChatScreen(),this.props.initialChatVerificationPromo&&!1===e.isVerificationRequestSent&&!0===this.props.isVerificationRequestSent&&this.reloadChat()}},{key:"reloadChat",value:function(){var e=this.props.activeChat.chat_user;e&&this.props.actions.fetchChat({userId:e.user_id})}},{key:"render",value:function(){var e,t=this.props,r=t.activeChat,n=t.onUserClick,o=r.chat_user,i=r.initial_chat_screen,s=o?(0,Gr.cf)(o.pre_match_time_left,o):{expirationStatus:void 0,expirationStatusProgress:0},a=s.expirationStatus,c=s.expirationStatusProgress,l=this.getActionButtons(),u=i&&i.title||"",f=i&&i.message||"";return(0,p.jsx)(Ln,{photoUrl:(0,U.gJ)((null===(e=null==o?void 0:o.profile_photo)||void 0===e?void 0:e.large_url)||"",180,180),title:u,text:(0,p.jsx)(Ar.Z,{html:f}),expirationStatus:a,expirationStatusProgress:c,onAvatarClick:n,actions:l})}},{key:"getActionButtons",value:function(){var e=this.props.boostEnabled,t=this.props.activeChat.promo_banners,r=[],n=t.find((function(e){return 91===e.promo_block_type}));if(n){var o=n.buttons,i=(void 0===o?[]:o)[0];i&&r.push((0,p.jsx)(cn.ZP,{text:i.text,onClick:this.handleExtend,color:7===i.type?mr.lt.Mono.GRAY_DARK:mr.lt.Features.EXTEND,isDisabled:this.state.isLoading||7===i.type},"extend-match-action"))}var s=t.find((function(e){return 90===e.promo_block_type}));if(s){var a=s.buttons,c=Fn(void 0===a?[]:a,1)[0];c&&!e&&r.push((0,p.jsx)(cn.ZP,{text:c.text,onClick:this.handleUnlimitedExtend,color:mr.lt.Features.BILLING,isDisabled:this.state.isLoading},"purchase-boost-action"))}var l=t.find((function(e){return 358===e.promo_block_type&&5===e.promo_block_position}));if(l){var u=l.buttons,f=Fn(void 0===u?[]:u,1)[0];f&&r.push((0,p.jsx)(de.Z,{onElementVisible:this.handleRequestPhotoVerificationVisible.bind(this,l),children:(0,p.jsx)(Bn,{ctaText:f.text,onClickCta:this.handleAskForPhotoVerification.bind(this,l),onClickInfo:this.handleMoreInfoAboutPhotoVerification})},"request-photo-verification-block"))}return r}},{key:"handleRequestPhotoVerificationVisible",value:function(e){var t=e.promo_block_type;t&&this.props.hotpanel.viewBanner(t,e.promo_block_position,e.context)}},{key:"handleExtend",value:function(){var e=this;this.setState({isLoading:!0});var t=this.props,r=t.activeChat,n=t.boostEnabled,o=r.chat_user;if(o){var i=o.user_id;i&&this.props.actions.extendMatch({userId:i,onDone:function(){e.setState({isLoading:!1})}}),this.props.hotpanel.click(945);var s=o.pre_match_time_left;void 0!==s&&this.props.hotpanel.fireExtendMatchEvent({timeLeft:s.goal-s.progress,userId:i,boostEnabled:n})}}},{key:"handleUnlimitedExtend",value:function(){this.props.actions.openBoost({activationPlace:96,context:89,initiatorScreen:void 0})}},{key:"handleAskForPhotoVerification",value:function(e){var t=this,r=this.props,n=r.activeChat,o=r.verificationDialogPromo,i=n.chat_user;if(i){var s=i.user_id;o?this.props.actions.showDialog(qr.K,{promo:o,userId:s,clientSource:10,onRequestSent:function(){t.reloadChat()}}):this.props.actions.sendPhotoVerificationRequest(s,10,(function(){t.reloadChat()}))}var a=e.promo_block_type;a&&this.props.hotpanel.clickBanner({bannerId:a,positionId:e.promo_block_position,callToActionType:1,context:89})}},{key:"handleMoreInfoAboutPhotoVerification",value:function(e){e.stopPropagation(),this.props.actions.showDialog(Xt.Y,{clientSource:10})}},{key:"trackChatScreen",value:function(){var e=this.props,t=e.activeChat,r=e.activationPlace,n=t.chat_user,o=n?(0,Gr.cf)(n.pre_match_time_left,n):{expirationStatus:mr.I1.AVERAGE_TIME,expirationStatusProgress:0},i=o.expirationStatus,s=3;o.expirationStatusProgress&&(s=i===mr.I1.LOW_TIME?5:7);var a=306===r?306:226;t&&this.props.hotpanel.fireChatScreenEvent({activeChat:t,activationPlace:a,connectionStatus:s})}}],r&&Vn(t.prototype,r),n&&Vn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.Component),$n=(0,o.$j)((function(e,t){var r=t.activeChat.promo_banners.some((function(e){return 358===e.promo_block_type&&5===e.promo_block_position})),n=t.activeChat.promo_banners.find((function(e){return 358===e.promo_block_type&&18===e.promo_block_position}));return Object.assign(Object.assign({},t),{initialChatVerificationPromo:r,verificationDialogPromo:n,boostEnabled:(0,un.$X)(e),isVerificationRequestSent:e.photoVerification.isVerificationRequestSent,activationPlace:e.messenger.chat.activationPlace})}),(function(e){return{actions:(0,i.DE)({extendMatch:K._T,openBoost:ln.ZC,fetchChat:P.Gg,showDialog:C.vC,sendPhotoVerificationRequest:Hr.mi},e),hotpanel:(0,i.DE)({click:O.V4,fireExtendMatchEvent:O.om,fireChatScreenEvent:O.E2,viewBanner:O.F,clickBanner:O.IF},e)}}))(Yn),Qn=r(4707618922),Xn=r(2711648853),Kn=function(e){var t=e.children,r=e.chatBlocker,o=e.isLoading,i=e.scrollRef,s=e.onScrollTop,a=e.onDebouncedScroll,c={block:u()({"messages-list":!0,"is-loading":o})};return(0,p.jsx)("div",{className:c.block,children:(0,p.jsxs)(Xn.Z,{ref:i,isIsolated:!0,isForceVisible:!0,onScrollTop:s,onDebouncedScroll:a,children:[r?(0,p.jsx)("div",{className:"messages-list__blocker",children:r}):null,r?null:(0,p.jsxs)(n.Fragment,{children:[o?(0,p.jsx)("div",{className:"messages-list__loader",children:(0,p.jsx)(L.ZP,{color:L.ux.PRIMARY})}):null,(0,p.jsx)("div",{className:"messages-list__conversation",children:t}),(0,p.jsx)("div",{className:"messages-list__conversation-pusher"})]})]})})},eo=function(e){var t=e.children;return(0,p.jsx)("div",{className:"message-group-date",children:(0,p.jsx)(H.P3,{color:H.d9.GRAY_DARK,align:H.PH.CENTER,children:t})})};function to(e){return to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},to(e)}function ro(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return no(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return no(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function no(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,io(n.key),n)}}function io(e){var t=function(e,t){if("object"!==to(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==to(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===to(t)?t:String(t)}function so(e,t){return so=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},so(e,t)}function ao(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=lo(e);if(t){var o=lo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===to(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return co(e)}(this,r)}}function co(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lo(e){return lo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lo(e)}var uo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&so(e,t)}(a,e);var t,r,o,i=ao(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),(0,s.Z)(co(t)),t.scrollToBottomRequired=!1,t.scrollRef=(0,n.createRef)(),t.beforeLoadHistoryScrollHeight=0,t}return t=a,r=[{key:"componentDidMount",value:function(){this.scrollBottom()}},{key:"componentDidUpdate",value:function(e){if((this.scrollToBottomRequired||e.isChatRequestPerforming&&!this.props.isChatRequestPerforming)&&(this.scrollToBottomRequired=!1,this.scrollBottom()),!e.isHistoryLoading&&this.props.isHistoryLoading){var t=this.getScrollPosition().scrollHeight;this.beforeLoadHistoryScrollHeight=t}if(e.isHistoryLoading&&!this.props.isHistoryLoading){var r=this.getScrollPosition(),n=r.scrollHeight,o=r.scrollTop;this.scrollTo(n-this.beforeLoadHistoryScrollHeight+o)}!1===e.isVerificationCompleted&&!0===this.props.isVerificationCompleted&&this.reloadChat()}},{key:"render",value:function(){var e=this,t=this.props,r=t.activeChat,o=t.isHistoryLoading,i=r&&r.chat_user,s=!i||i.is_deleted;return(0,p.jsx)(Kn,{isLoading:o,chatBlocker:this.getInitialChatScreen(),scrollRef:this.scrollRef,onScrollTop:this.handleLoadHistoryMessages,onDebouncedScroll:this.handleDebouncedScroll,children:(0,p.jsx)(Qn.AE,{messages:this.getMessagesForGenericMessagesList(),onMessageVisible:function(t){e.markMessageInView=t},children:function(t){var r=t.messages;return(0,p.jsxs)(n.Fragment,{children:[e.renderMessages(r),!s&&e.renderNotice()]})}})})}},{key:"getMessagesForGenericMessagesList",value:function(){var e=this;return this.props.messages.map((function(t){return{id:t.uid,fromUserId:t.fromPersonId,messageText:(0,g.UD)(t),messageType:e.getMessageTypeForGenericMessagesList(t.messageType),message:t,originalMessageScaffold:void 0}}))}},{key:"getMessageTypeForGenericMessagesList",value:function(e){return 36===e?Qn.Cb.GIF:Qn.Cb.REGULAR}},{key:"getInitialChatScreen",value:function(){var e=this.props,t=e.activeChat,r=e.messages,n=e.onUserClick;return t&&t.initial_chat_screen&&0===r.length?(0,p.jsx)($n,{activeChat:t,onUserClick:n}):null}},{key:"renderMessages",value:function(e){var t=this,r=this.props.activeChat,o=r&&r.chat_user,i=this.props.onRetryMessage;return e.map((function(e){var r=e.originalMessageScaffold.message,s=r.sectionTitle;return(0,p.jsxs)(n.Fragment,{children:[s&&(0,p.jsx)(eo,{children:s}),(0,p.jsx)(Dr,{message:r,urlInfo:e.urlInfo,status:r.status,errorType:r.errorType,isOwn:Boolean(e.isMessageFromCurrentUser),isLast:Boolean(e.isLastMessageInGroup),isPromoPartner:Boolean(o&&o.is_inapp_promo_partner),onRetry:i.bind(null,r.uid),onMessageVisible:t.handleMessageVisible.bind(t,r)})]},r.uid)}))}},{key:"renderNotice",value:function(){return[this.getSnoozeNotice(),this.getTimerNotice(),this.getRematchNotice(),this.getAntiGhostingNotice()].find((function(e){return null!==e}))}},{key:"getSnoozeNotice",value:function(){var e=null,t=this.getSnoozePromoBlock();if(t){var r,n=(t.extra_texts||[])[0];if(n&&n.text){var o=n.text;r=Object.values(Te.id).map((function(e){return Te.fj[e]})).find((function(e){return e.glyph===o}))?o:void 0}e=(0,p.jsx)(sn,{title:t.header,description:t.mssg,emoji:r})}return e}},{key:"getSnoozePromoBlock",value:function(){var e=null,t=this.props.activeChat;if(t&&t.promo_banners){var r=this.props.hasSentMessages?null:this.getChatPromoOfType(265,t.promo_banners);e=(this.props.hasReceivedMessages?null:this.getChatPromoOfType(266,t.promo_banners))||r}return e}},{key:"getChatPromoOfType",value:function(e,t){return t.find((function(t){return t.promo_block_type===e}))}},{key:"getTimerNotice",value:function(){var e=this.props.activeChat,t=this.getEligibleForNotice(),r=t.isEligibleForNotice,n=t.hasOwnMessages,o=e&&e.chat_user,i=e&&e.promo_banners||[],s=i.find((function(e){return 358===e.promo_block_type&&8===e.promo_block_position})),a=function(){var e=null;if(s){var t=i.find((function(e){return 358===e.promo_block_type&&18===e.promo_block_position}));e=(0,p.jsx)(on,{promo:s,dialogPromo:t,clientSource:10,chatUser:o,ownMessagesPresent:Boolean(n)})}else e=(0,p.jsx)(Vr,{ownMessagesPresent:Boolean(n)});return e};return r?a():null}},{key:"getRematchNotice",value:function(){var e=this.props.activeChat,t=!1,r=e&&e.chat_user;return r&&r.connection_expired_timestamp&&r.connection_expired_timestamp<Number(new Date)&&(t=!0),t&&e?(0,p.jsx)(bn,{user:e.chat_user}):null}},{key:"getAntiGhostingNotice",value:function(){var e=this.props.activeChat,t=(e&&e.promo_banners||[]).find((function(e){return 286===e.promo_block_type||373===e.promo_block_type||372===e.promo_block_type}));return e&&t?(0,p.jsx)(Nn,{activeChat:e,promoBanner:t},"antighosting"):null}},{key:"getEligibleForNotice",value:function(){var e={isEligibleForNotice:!1},t=this.props.ownUserId,r=this.props.activeChat,n=this.props.messages,o=r&&r.chat_user;if(o&&o.reply_time_left&&!o.pre_match_time_left&&(!r||!r.initial_chat_screen)){var i=n.filter((function(e){return e.fromPersonId===t}));0!==i.length&&n.length-i.length!=0||(e={isEligibleForNotice:!0,hasOwnMessages:i.length>0})}return e}},{key:"handleMessageVisible",value:function(e){var t=e.uid;e.hasLewdPhoto&&e.isMasked&&this.props.hotpanel.viewElement(522),this.markMessageInView&&this.markMessageInView(t)}},{key:"handleLoadHistoryMessages",value:function(){var e=this.props.activeChat,t=e&&e.chat_instance,r=this.props.messages,n=ro(r,1)[0];!this.props.isHistoryLoading&&t&&t.counter&&t.counter>r.length&&this.props.actions.loadHistoryMessages({chatInstanceId:t.uid,oldestMessage:n})}},{key:"handleDebouncedScroll",value:function(e){this.trackScrollEvent(e)}},{key:"trackScrollEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.props.hotpanel.fireEvent({name:195,body:{element:98,direction:5,reached_end:e}})}},{key:"getScrollPosition",value:function(){var e=this.scrollRef.current;return e?e.getScrollPosition():{scrollTop:0,scrollHeight:0,clientHeight:0}}},{key:"scrollTo",value:function(e){var t=this.scrollRef.current;t&&t.scrollTo(e)}},{key:"scrollBottom",value:function(){var e=this.scrollRef.current;e&&e.scrollBottom()}},{key:"setScrollToBottomRequired",value:function(e){this.scrollToBottomRequired=e}},{key:"reloadChat",value:function(){var e=this.props.activeChat,t=e&&e.chat_user;t&&this.props.actions.fetchChat({userId:t.user_id})}}],r&&oo(t.prototype,r),o&&oo(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.Component),po=(0,o.$j)((function(e){return{activeChat:e.messenger.chat.activeChat,hasSentMessages:e.messenger.chat.appendCountSent>0,hasReceivedMessages:e.messenger.chat.appendCountReceived>0,messages:e.messenger.chat.messages,ownUserId:e.user.id,isChatRequestPerforming:Boolean(e.messenger.chat.chatRequest),isHistoryLoading:Boolean(e.messenger.chat.historyRequest),isVerificationCompleted:e.photoVerification.isVerificationCompleted}}),(function(e){return{actions:(0,i.DE)({loadHistoryMessages:P.Fl,fetchChat:P.Gg},e),hotpanel:(0,i.DE)({fireEvent:O.BX,viewElement:O.Ye},e)}}),null,{forwardRef:!0})(uo),fo=r(4343829658),ho=r(2845196681),mo=r(7132203187),vo=r(4482138870);function yo(e){return yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yo(e)}function go(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==yo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==yo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===yo(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bo=function(e){var t=e.isLoading,r=e.src,n=e.onClick,o=e.mediaBoxRef,i=e.aspectRatio;return(0,p.jsx)("div",{className:"gif-uploader__item",style:go({},"--item-aspect-ratio",i),children:(0,p.jsx)(vo.Z,{isLoading:t,src:r,onClick:n,mediaBoxRef:o,aspect:vo.r.LANDSCAPE})})};function _o(e){return _o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_o(e)}function xo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jo(n.key),n)}}function jo(e){var t=function(e,t){if("object"!==_o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_o(t)?t:String(t)}function Po(e,t){return Po=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Po(e,t)}function So(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ko(e);if(t){var o=ko(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wo(e)}(this,r)}}function wo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ko(e){return ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ko(e)}var Co="PREVIEW_STEP",Eo="FINAL_STEP",Oo=[me.v7,me.pd],Ro=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Po(e,t)}(i,e);var t,r,n,o=So(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(wo(t)),t.state={status:"INACTIVE_STEP"},t.imagePreloader=ho.Z.resolve(mo.Z),t}return t=i,r=[{key:"componentDidMount",value:function(){this.imagePreloader.on("load",this.handleGifFulfilled).on("error",this.handleGifFulfilled).on("cached",this.handleGifFulfilled)}},{key:"componentWillUnmount",value:function(){this.imagePreloader.off("load",this.handleGifFulfilled).off("error",this.handleGifFulfilled).off("cached",this.handleGifFulfilled);var e=this.getPreloadUrl();e&&this.imagePreloader.cancel([e])}},{key:"render",value:function(){var e=this.props,t=e.gif,r=e.supportedMediaTypes,n=this.state.status,o=this.getContentUrl(n);return(0,p.jsx)(de.Z,{onElementVisible:this.handleGifItemVisible,children:(0,p.jsx)(bo,{aspectRatio:this.getAspectRatio(t,r),src:o,isLoading:n!==Eo,onClick:this.handleGifItemClick.bind(this,t)})})}},{key:"getAspectRatio",value:function(e,t){var r=e.downsampled,n=(0,k.J3)(r||[],Oo,t);if(n){var o=n.width,i=n.height;if(o&&i)return o/i}return 1}},{key:"getContentUrl",value:function(e){var t,r=this.props,n=r.gif,o=r.supportedMediaTypes,i=n.preview||[],s=n.downsampled||[];switch(e){case Co:t=(0,k.J3)(i,Oo,o);break;case Eo:t=(0,k.J3)(s,Oo,o)}return t?t.url:void 0}},{key:"getPreloadUrl",value:function(){return this.getContentUrl(Eo)}},{key:"handleGifItemVisible",value:function(){this.setState({status:Co});var e=this.getPreloadUrl();e&&this.imagePreloader.append([e])}},{key:"handleGifItemClick",value:function(e){this.props.onSendGif(e)}},{key:"handleGifFulfilled",value:function(e){e===this.getPreloadUrl()&&this.setState({status:Eo})}}],r&&xo(t.prototype,r),n&&xo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.PureComponent),Mo=Ro,To=r(4327811398),No=r(6662920819),Io={get lxPlaceholder(){return x.Z.get(415)},get lxNotFound(){return(0,p.jsx)(_.f1,{path:414,pathName:"bma_client@messenger.gif_send.not_found"})},get lxError(){return(0,p.jsx)(_.f1,{path:413,pathName:"bma_client@messenger.gif_send.error"})}},Do=function(e){var t=e.isLoading,r=e.hasError,o=e.onFieldBlur,i=e.onFieldFocus,s=e.onFieldInput,a=e.scrollRef,c=e.reference,l=e.fieldValue,f=e.onScrollBottom,h=e.children,d=e.onResetClick,m={block:u()({"gif-uploader":!0,"is-loading":t})},v=n.Children.toArray(h);return(0,p.jsxs)("div",{className:m.block,ref:c,children:[(0,p.jsx)("div",{className:"gif-uploader__input",children:(0,p.jsx)(To.Z,{isFocused:!0,onBlur:o,onInput:s,onFocus:i,onChange:s,placeholder:Io.lxPlaceholder||"Search GIFs...",value:l,icon:l?(0,p.jsx)(V.ZP,{name:"generic-close",size:V.Jh.SMALL}):null,onIconClick:d,hasAutoFocus:!0})}),(0,p.jsxs)("div",{className:"gif-uploader__results",children:[v.length>0?(0,p.jsx)(Xn.Z,{type:Xn.g.FIXED,ref:a,onScrollBottom:f,children:h}):null,l&&v.length<=0&&!t&&!r?(0,p.jsx)("div",{className:"gif-uploader__empty",children:(0,p.jsx)("div",{className:"gif-uploader__empty-text",children:(0,p.jsx)(H.P2,{tag:H.rh.P,color:H.d9.GRAY_DARK,align:H.PH.CENTER,children:Io.lxNotFound||"Sorry, we don’t have any GIFs for that term"})})}):null,t&&!r?(0,p.jsx)(No.ZP,{children:(0,p.jsx)(L.ZP,{size:L.gI.LARGE})}):null,r?(0,p.jsxs)("div",{className:"gif-uploader__empty",children:[(0,p.jsx)("div",{className:"gif-uploader__empty-icon",children:(0,p.jsx)(V.ZP,{name:"generic-attention-outlined",size:V.Jh.LARGE})}),(0,p.jsx)("div",{className:"gif-uploader__empty-text",children:(0,p.jsx)(H.P2,{tag:H.rh.P,color:H.d9.GRAY_DARK,align:H.PH.CENTER,children:Io.lxError||"Oops, that didn’t work – please try again later"})})]}):null]})]})};function Ao(e){return Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ao(e)}function Uo(e){return function(e){if(Array.isArray(e))return Lo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Lo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lo(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Zo(n.key),n)}}function Zo(e){var t=function(e,t){if("object"!==Ao(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ao(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ao(t)?t:String(t)}function Fo(e,t){return Fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fo(e,t)}function Go(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=zo(e);if(t){var o=zo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ao(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vo(e)}(this,r)}}function Vo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zo(e){return zo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zo(e)}var qo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fo(e,t)}(a,e);var t,r,o,i=Go(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),(0,s.Z)(Vo(t)),t.searchDebounced=(0,d.debounce)(t.handleSearch,1e3,Vo(t)),t.loadMoreDebounced=(0,d.debounce)(t.handleLoadMore,500,Vo(t)),t.scrollRef=(0,n.createRef)(),t}return t=a,r=[{key:"componentDidMount",value:function(){this.props.actions.loadGifList(this.props.searchQuery,fo.GS)}},{key:"componentWillUnmount",value:function(){this.searchDebounced.clear(),this.loadMoreDebounced.clear()}},{key:"render",value:function(){var e=this.props,t=e.gifs,r=e.searchQuery,n=e.isLoading,o=e.hasError,i=e.reference,s=e.supportedMediaTypes,a=e.onSendGif;return(0,p.jsx)(Do,{reference:i,fieldValue:r,isLoading:n,hasError:o,scrollRef:this.scrollRef,onFieldInput:this.handleSearchQueryChange,onResetClick:this.handleResetSearch,onScrollBottom:this.handleScrollBottom,children:t.map((function(e){return(0,p.jsx)(Mo,{gif:e,supportedMediaTypes:Uo(s),onSendGif:a},e.id)}))})}},{key:"handleSearchQueryChange",value:function(e){var t=e.target.value;this.props.actions.setSearchQuery(t),this.searchDebounced()}},{key:"handleResetSearch",value:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.props.actions.setSearchQuery(""),this.props.actions.loadGifList("",fo.GS),this.scrollUp()}},{key:"handleScrollBottom",value:function(){var e=this.props,t=e.isLoading,r=e.gifs,n=e.totalCount;!t&&n>r.length&&this.loadMoreDebounced()}},{key:"handleSearch",value:function(){this.props.actions.loadGifList(this.props.searchQuery,fo.GS),this.scrollUp()}},{key:"handleLoadMore",value:function(){var e=this.props,t=e.offset,r=e.searchQuery;this.props.actions.loadGifList(r,fo.GS,t+fo.GS)}},{key:"scrollUp",value:function(){var e=this.scrollRef.current;e&&e.scrollUp()}}],r&&Bo(t.prototype,r),o&&Bo(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.PureComponent),Ho=(0,o.$j)((function(e){return{gifs:e.messenger.giphy.list,isLoading:e.messenger.giphy.isLoading,hasError:e.messenger.giphy.hasError,offset:e.messenger.giphy.offset,searchQuery:e.messenger.giphy.searchQuery,totalCount:e.messenger.giphy.totalCount,supportedMediaTypes:e.env.features.supportedMediaTypes}}),(function(e){return{actions:(0,i.DE)({loadGifList:k.Ci,setSearchQuery:k.ql},e)}}))(qo),Wo=r(4112444649),Jo=function(e){var t=e.onEmojiClick,r=e.list,o=e.reference,i=(0,n.useRef)(null),s=(0,Wo.useSprings)(r.length,r.map((function(e,t){return{opacity:1,transform:"translate3d(0, 0px, 0) scale(1)",delay:6*t,from:{opacity:.1,transform:"translate3d(0, 2px, 0) scale(1.2)"},config:{tension:1e3,friction:250,mass:5}}})));return(0,p.jsx)("div",{className:"chat-emoji-viewer",ref:o,children:(0,p.jsx)(Xn.Z,{type:Xn.g.FIXED,children:(0,p.jsx)("div",{className:"chat-emoji-viewer__list",ref:i,children:s.map((function(e,n){return(0,p.jsx)("div",{className:"chat-emoji-viewer__list-item",onClick:null==t?void 0:t.bind(null,r[n]),children:(0,p.jsx)(Wo.animated.div,{style:Object.assign(Object.assign({},e),{position:"absolute",width:"100%",height:"100%",left:0,top:0,display:"flex",alignItems:"center",justifyContent:"center",willChange:"transform, opacity"}),children:(0,p.jsx)("div",{className:"chat-emoji-viewer__list-media",children:(0,p.jsx)(Te.ZP,{size:Te.Su.LARGE,glyph:r[n]})})},n)},n)}))})})})},Yo=function(e){var t=e.text;return(0,p.jsx)("div",{className:"message-field-placeholder",children:(0,p.jsx)("p",{className:"message-field-placeholder__text",children:t})})},$o=r(5494762394),Qo=r(3590277013),Xo=r(3510998081),Ko=r(4350110910),ei=r(7583494015),ti=["🙂","😂","😄","😅","😆","😉","😊","😋","😌","😍","😎","😏","😐","😑","😒","😔","😖","😘","😚","😜","😝","😞","😟","😡","😢","😤","😥","😩","😫","😬","😭","😯","😱","😳","😴","🙈","🙉","🙊","☀️","☕","❤️","🌹","🌺","🍒","🐱","👀","🙏","✋","✌","👊","👌","👍","👎","👏","💪","👑","💋","💔","💘","🔥"];function ri(e){return ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ri(e)}function ni(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oi(n.key),n)}}function oi(e){var t=function(e,t){if("object"!==ri(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ri(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ri(t)?t:String(t)}function ii(e,t){return ii=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ii(e,t)}function si(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ci(e);if(t){var o=ci(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ri(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ai(e)}(this,r)}}function ai(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ci(e){return ci=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ci(e)}var li=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ii(e,t)}(a,e);var t,r,o,i=si(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),(0,s.Z)(ai(t)),t.state={isGifDropdownActive:!1,isEmojiDropdownActive:!1,isMessageFieldFocused:!1},t.messageFlags=t.getDefaultMessageFlags(),t.outgoingWritingNotification=(0,d.throttle)(t.handleOutgoingWriting,2e3,ai(t)),t.messagesListRef=(0,n.createRef)(),t.inputRef=(0,n.createRef)(),t.uploaderRef=(0,n.createRef)(),t}return t=a,r=[{key:"handleDragEnter",value:function(e){this.props.sendPhotoAllowed&&(e.preventDefault(),this.props.actions.setDragEnterCounter(this.props.dragEnterCounter+1))}},{key:"handleDragLeave",value:function(e){this.props.sendPhotoAllowed&&(e.preventDefault(),this.props.actions.setDragEnterCounter(this.props.dragEnterCounter-1))}},{key:"handleDrop",value:function(e){if(this.props.sendPhotoAllowed){e.preventDefault(),this.props.actions.setDragEnterCounter(0);var t=e.dataTransfer,r=t&&t.files[0];r&&(this.uploadFile(r),this.showSharePhotoDialog())}}},{key:"handleDragOver",value:function(e){this.props.sendPhotoAllowed&&e.preventDefault()}},{key:"componentDidMount",value:function(){v.Z.on(y.CHAT_MESSAGE,this.handleIncomingMessage,this),v.Z.on(y.CHAT_SETTINGS,this.handleIncomingChatSettings,this),Xo.Z.on(Ko.K6,this.handleBroadcastMessageSent),this.tryOpenProfileSection(),this.focusToInput();var e=document.documentElement;e.addEventListener("dragenter",this.handleDragEnter),e.addEventListener("dragleave",this.handleDragLeave),e.addEventListener("drop",this.handleDrop),e.addEventListener("dragover",this.handleDragOver),this.props.actions.setDragEnterCounter(0),document.addEventListener("click",this.handleAnyClick),this.props.pushCallWaiting&&this.props.chatUser&&this.props.actions.startIncomingCallFromPush(this.props.chatUser)}},{key:"componentWillUnmount",value:function(){this.outgoingWritingNotification.clear(),v.Z.un(y.CHAT_MESSAGE,this.handleIncomingMessage,this),v.Z.un(y.CHAT_SETTINGS,this.handleIncomingChatSettings,this),Xo.Z.off(Ko.K6,this.handleBroadcastMessageSent),document.removeEventListener("click",this.handleAnyClick);var e=document.documentElement;e.removeEventListener("dragenter",this.handleDragEnter),e.removeEventListener("dragleave",this.handleDragLeave),e.removeEventListener("drop",this.handleDrop),e.removeEventListener("dragover",this.handleDragOver),this.props.actions.setDragEnterCounter(0),this.props.actions.clearGifSearch()}},{key:"getDefaultMessageFlags",value:function(){return{hadCharacter:!1,hadBlur:!1,hadSend:!1}}},{key:"trackMessageLinkClick",value:function(e){this.props.hotpanel.clickEvent({element:660,parentElement:(0,T.o)(e)?1173:1174})}},{key:"focusToInput",value:function(){this.setState({isMessageFieldFocused:!0}),this.inputRef.current&&this.inputRef.current.focus()}},{key:"componentDidUpdate",value:function(e){this.tryChangeInitialScree(e),this.tryRemoveReplyTimeLeft();var t=this.props.activeChat,r=e.activeChat;t&&r&&t.chat_instance.uid!==r.chat_instance.uid&&(this.tryOpenProfileSection(),this.messageFlags=this.getDefaultMessageFlags(),this.focusToInput())}},{key:"setMessage",value:function(e){var t=this.props.chatUserId;t&&this.props.actions.updateActiveMessage(e,t)}},{key:"trackSendMessage",value:function(e){var t=e.retry,r=e.sendPhoto,n=e.sendGif,o=this.props,i=o.activeChat,s=o.activationPlace,a=o.chatUser,c=306===s?306:11;this.props.hotpanel.fireEvent({name:8,body:{activation_place:c,encrypted_user_id:i?(0,M.cc)(i):void 0,recepient_online_status:a?(0,M.Ag)(a):void 0,mode_connection:a?(0,M.Kd)(a):void 0,length:this.props.activeMessage.length,message_first:this.isFirstTimeTexted(),message_first_replied:this.isFirstTimeReplied(),resent:t,send_photo:r,send_giphy:n}})}},{key:"isFirstTimeTexted",value:function(){return 0===this.props.messages.length}},{key:"isFirstTimeReplied",value:function(){var e=this.props.activeChat,t=e&&(0,M.cc)(e);return!this.props.messages.some((function(e){return e.toPersonId===t}))}},{key:"render",value:function(){var e=this.props.chatUser;return e?(0,p.jsxs)(n.Fragment,{children:[(0,p.jsx)(he,{chatUser:e,onUserClick:this.handleUserClick}),(0,p.jsx)(po,{ref:this.messagesListRef,onRetryMessage:this.handleRetryMessage,onUserClick:this.handleUserClick}),this.renderMessageField()]}):null}},{key:"renderMessageField",value:function(){var e=this.props.sendMessageAllowed,t=this.props.chatUser;if(!t||t.is_inapp_promo_partner)return null;if(this.props.isUserDeleted){var r=t.name;return(0,p.jsx)(Yo,{text:j.getLxDeletedFemale({name:r})})}if(!e)return null;var n=this.props,o=n.activeMessage,i=n.sendPhotoAllowed,s=n.sendGifAllowed,a=n.maxCharactersInMessage,c=this.state,l=c.isGifDropdownActive,u=c.isEmojiDropdownActive,f=c.isMessageFieldFocused;return(0,p.jsx)($o.Z,{isUploadPhotoActive:this.props.sharePhotoActive,isUploadGifActive:l,onFieldChange:this.handleMessageInput,onFieldKeyPress:this.handleMessageKeyPress,onFieldFocus:this.handleMessageFocus,onFieldBlur:this.handleMessageBlur,onUploadPhotoClick:i?this.handleUploadPhotoClick:void 0,onUploadGifClick:s?this.handleUploadGifClick:void 0,onEmojiViewerClick:this.handleEmojiViewerClick,onSendPressed:this.handleSendMessage,value:o,isFocused:f,isSendButtonDisabled:0===(0,b.TX)(o).length,placeholderText:j.lxFieldPlaceholder,hasAutoFocus:!0,hasAutoHeight:!0,reference:this.inputRef,giphyUploader:l?(0,p.jsx)(Ho,{onSendGif:this.handleSendGif,reference:this.uploaderRef}):null,emojiViewer:u?(0,p.jsx)(Jo,{list:ti,onEmojiClick:this.handleEmojiClick,reference:this.uploaderRef}):null,maxLength:a})}},{key:"sendMessage",value:function(e){var t=e.message,r=void 0===t?"":t,n=e.photo,o=e.gif,i=e.retry,s=void 0!==i&&i,a=e.inappropriateMark,c=void 0!==a&&a,l=this.props.chatUserId;l&&this.props.actions.setHasNotifications(l,!1),this.requestScrollMessagesListToBottom();var u=o&&o.embedUrl,p=o&&o.aspectRatio;u&&p&&this.props.actions.sendGifMessage(u,p),this.setState({isGifDropdownActive:!1,isEmojiDropdownActive:!1});var f=(0,b.TX)(r);f&&(this.props.actions.sendTextMessage(f),this.setMessage("")),n&&this.props.actions.sendPhotoMessage(n,c),this.trackSendMessage({retry:s,sendPhoto:Boolean(n),sendGif:Boolean(o)}),this.props.isNeedToAskPermission&&this.props.actions.setShowAsking(!0),l&&(this.props.actions.moveUserToTop(l),this.props.actions.setShowYourMoveIndicator(l,!1)),this.tryToRemoveAntiGhostingBanner()}},{key:"tryToRemoveAntiGhostingBanner",value:function(){var e=this.props.activeChat,t=(e&&e.promo_banners||[]).find((function(e){return 286===e.promo_block_type}));t&&this.props.actions.removePromoBlock(286)}},{key:"requestScrollMessagesListToBottom",value:function(){var e=this.messagesListRef.current;e&&e.setScrollToBottomRequired(!0)}},{key:"handleMessageInput",value:function(e){(0,ei.W)(e)&&(this.setMessage(e.target.value),this.messageFlags.hadCharacter||(this.messageFlags.hadCharacter=!0,this.triggerEnterTextEvent(8,e.target.value.length)),this.outgoingWritingNotification())}},{key:"triggerEnterTextEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.props.activeChat;this.props.hotpanel.fireEvent({name:430,body:{characters:t||this.props.activeMessage.length,encrypted_user_id:r?(0,M.cc)(r):void 0,action_type:e}})}},{key:"handleMessageFocus",value:function(){this.setState({isMessageFieldFocused:!0}),this.props.hotpanel.clickEvent({element:251,parentElement:252})}},{key:"handleMessageBlur",value:function(){this.setState({isMessageFieldFocused:!1}),this.messageFlags.hadBlur||(this.messageFlags.hadBlur=!0,this.triggerEnterTextEvent(5))}},{key:"handleUploadPhotoClick",value:function(){var e=this;this.fileInput&&document.body.removeChild(this.fileInput),this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.style.display="none",this.fileInput.accept=Qo.Z.join(","),this.fileInput.onchange=function(t){var r=t.target,n=r&&r.files,o=n?n[0]:void 0;e.uploadFile(o),e.showSharePhotoDialog()},document.body.appendChild(this.fileInput),this.fileInput.click()}},{key:"uploadFile",value:function(e){var t=this;e&&(this.props.actions.setSharedPhotoLoading(!0),this.props.actions.uploadPhotoForMessenger(e).then((function(e){t.props.actions.setSharedPhoto(e),t.props.actions.setSharedPhotoUploadFailed(!1)})).catch((function(){t.props.actions.setSharedPhotoUploadFailed(!0)})).then((function(){t.props.actions.setSharedPhotoLoading(!1)})))}},{key:"handleBroadcastMessageSent",value:function(e){var t=this.props.messages,r=t[t.length-1],n=r?r.uid:null,o=e.from_person_id,i=e.to_person_id,s=this.props.ownUser.id;i===this.props.chatUserId&&(this.shouldSaveScrollPosition()||this.requestScrollMessagesListToBottom(),this.tryToRemoveAntiGhostingBanner(),o===s&&n!==e.uid&&this.props.actions.appendMessage(e.uid,g.x5,e))}},{key:"handleMessageKeyPress",value:function(e){if(e.key===h.q7&&!e.shiftKey){if(e.preventDefault(),!(0,ei.W)(e))return;this.sendMessage({message:this.props.activeMessage})}}},{key:"handleSendMessage",value:function(e){(0,ei.W)(e)&&(this.props.hotpanel.clickEvent({element:253,parentElement:252}),this.messageFlags.hadSend||(this.messageFlags.hadSend=!0,this.triggerEnterTextEvent(39)),this.sendMessage({message:this.props.activeMessage}))}},{key:"handleRetryMessage",value:function(e){var t=this,r=this.props.messages.find((function(t){return t.uid===e}));if(r){var n=!0;switch(r.messageType){case 36:var o=r.mssg,i=r.gifMessageInfo,s={embedUrl:o,aspectRatio:null==i?void 0:i.aspect_ratio};this.sendMessage({gif:s,retry:!0});break;case 19:var a=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=r.multimedia,o=n&&n.photo;t.sendMessage({photo:o,retry:!0,inappropriateMark:e})},c=this.props.chatUser;c&&91===r.errorType?(n=!1,this.props.actions.showDialog(D.F,{userName:c.name,onResend:function(){t.props.actions.deleteMessage(e),a(!0)},onDelete:function(){t.props.actions.deleteMessage(e)}})):a(!1);break;case 1:this.sendMessage({message:r.mssg,retry:!0})}n&&this.props.actions.deleteMessage(e)}}},{key:"handleSendGif",value:function(e){this.props.actions.addGifToCache(e),this.props.actions.clearGifSearch(),this.sendMessage({gif:e}),this.setState({isGifDropdownActive:!1})}},{key:"handleIncomingMessage",value:function(e){var t=this.props,r=t.messages,n=t.chatUserId,o=t.actions,i=r[r.length-1],s=i?i.uid:null,a=e.from_person_id,c=e.to_person_id,l=this.props.ownUser.id;a===l&&c!==this.props.chatUserId||((a===this.props.chatUserId||e.video_call_msg_info)&&(this.shouldSaveScrollPosition()||(this.requestScrollMessagesListToBottom(),this.props.actions.setHasNotifications(a,!1)),this.props.actions.setShowYourMoveIndicator(a,!0),this.tryToRemoveAntiGhostingBanner()),a!==this.props.chatUserId&&a!==l||s===e.uid||this.props.actions.appendMessage(e.uid,g.x5,e),!r.length&&n&&o.fetchChat({userId:n}))}},{key:"handleIncomingChatSettings",value:function(e){this.props.actions.setChatSettings(e);var t=this.props.chatUser;!0===e.allow_disabling_private_detector&&this.props.actions.showDialog(I.a,{chatUserName:t&&t.name,chatUid:e.chat_instance_id})}},{key:"handleOutgoingWriting",value:function(){var e=this.props.activeChat,t=e&&e.encrypted_comet_url,r=e&&e.encrypted_im_writing;t&&r&&this.props.actions.sendWritingNotification(t,r)}},{key:"handleUserClick",value:function(){if(this.props.isProfileSectionOpen)this.props.actions.closeUserProfile(!0);else{var e=this.props.chatUser;e&&!e.is_inapp_promo_partner&&this.props.actions.openUserProfile({userId:e.user_id,gameMode:e.match_mode,clientSource:10,isOpenByUserAction:!0})}}},{key:"handleUploadGifClick",value:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.props.actions.clearGifSearch(),this.setState({isGifDropdownActive:!this.state.isGifDropdownActive,isEmojiDropdownActive:!1})}},{key:"handleEmojiViewerClick",value:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.focusToInput(),this.state.isEmojiDropdownActive||this.props.hotpanel.clickEvent({element:183,parentElement:252}),this.setState({isEmojiDropdownActive:!this.state.isEmojiDropdownActive,isGifDropdownActive:!1})}},{key:"handleEmojiClick",value:function(e){this.focusToInput(),this.setMessage(this.props.activeMessage+e)}},{key:"handleAnyClick",value:function(e){var t=e.target;this.uploaderRef.current&&!this.uploaderRef.current.contains(t)&&this.setState({isGifDropdownActive:!1,isEmojiDropdownActive:!1}),t&&t.classList&&t.classList.contains(b.mD)&&this.trackMessageLinkClick(t.href)}},{key:"checkMoveUserToConversationSection",value:function(){var e=this.props.chatUserId,t=this.props.usersMatchQueue.find((function(t){return t.getUserId()===e}));if(t){this.props.actions.fetchConversationsSection();var r=t.getUserId();r&&this.props.actions.moveUserToConversationSection(r)}}},{key:"tryChangeInitialScree",value:function(e){if(1===e.messages.length&&1===this.props.messages.length){var t=e.messages[0],r=this.props.messages[0];if(t.status===g.XP&&r.status===g.x5){var n=this.props.activeChat,o=this.props.chatUserId;this.checkMoveUserToConversationSection(),o&&n&&n.initial_chat_screen&&this.props.actions.fetchChat({userId:o})}}}},{key:"tryRemoveReplyTimeLeft",value:function(){var e=this.props.messages;if(e.length>1){var t=this.props.activeChat,r=this.props.chatUser;if(r&&r.reply_time_left&&!r.pre_match_time_left&&t&&!t.initial_chat_screen){var n=this.props.chatUserId,o=new Set;e.forEach((function(e){var t=e.fromPersonId;o.add(t)})),n&&2===o.size&&this.props.actions.removeReplyTimeLeft(n)}}}},{key:"tryOpenProfileSection",value:function(){var e=this.props.chatUser;!e||e.is_deleted||e.is_inapp_promo_partner?this.props.actions.closeUserProfile():this.props.actions.openUserProfile({userId:e.user_id,gameMode:e.match_mode,clientSource:e.client_source})}},{key:"showSharePhotoDialog",value:function(){var e=this;this.props.actions.showDialog(N._,{onUploadFile:function(t){e.uploadFile(t)},onSendMessage:function(t,r){e.sendMessage({message:t,photo:r}),e.props.actions.hideDialog()}},{isLocal:!0})}},{key:"shouldSaveScrollPosition",value:function(){var e=this.messagesListRef.current,t=e?e.getScrollPosition():{scrollHeight:0,scrollTop:0,clientHeight:0},r=t.scrollHeight,n=t.scrollTop,o=t.clientHeight;return r-n-o>o}}],r&&ni(t.prototype,r),o&&ni(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.Component),ui=(0,o.$j)((function(e){var t=(0,M.XN)(e),r=(0,M.X7)(e),n=(0,M.gI)(e),o=(0,M.uJ)(e),i=(0,M.NF)(e),s=e.messenger.chat.activeChat,a=e.messenger.chat.activationPlace,c=s&&s.chat_user,l=c&&c.user_id,u=Boolean(c&&c.is_deleted);return{activeChat:s,activationPlace:a,chatUser:c,chatUserId:l,usersMatchQueue:e.messenger.usersList.usersMatchQueue,ownUser:e.user,messages:e.messenger.chat.messages,isProfileSectionOpen:e.otherProfile.isSectionOpen,isNeedToAskPermission:e.pushNotifications.isNeedToAskPermission,isUserDeleted:u,activeMessage:t,sendPhotoAllowed:r,dragEnterCounter:e.messenger.chat.dragEnterCounter,sendMessageAllowed:n,sendGifAllowed:o,sharePhotoActive:e.messenger.chat.sharePhotoActive,maxCharactersInMessage:(0,M.Q1)(e),pushCallWaiting:i}}),(function(e){return{actions:(0,i.DE)({appendMessage:P.qO,deleteMessage:P.$Z,sendTextMessage:P.nx,sendWritingNotification:P.Jv,updateActiveMessage:P.dC,moveUserToConversationSection:w.JF,fetchConversationsSection:w.uw,moveUserToTop:w.T8,removeReplyTimeLeft:w.XQ,fetchChat:P.Gg,openUserProfile:R.DZ,closeUserProfile:R.Rb,setShowAsking:E.V,showDialog:C.vC,uploadPhotoForMessenger:P.c1,setSharedPhotoUploadFailed:P.aI,setSharedPhotoLoading:P.ti,setSharedPhoto:P.n8,setDragEnterCounter:P.Wy,sendPhotoMessage:P.oU,sendGifMessage:P.XU,addGifToCache:k.Hc,clearGifSearch:k.qF,hideDialog:C.Wr,setChatSettings:P.RI,setShowYourMoveIndicator:w.pu,setHasNotifications:w.w6,removePromoBlock:P.Yu,startIncomingCallFromPush:S.SA},e),hotpanel:(0,i.DE)({fireEvent:O.BX,clickEvent:O.Q5},e)}}))(li),pi=r(6406964886),fi=function(){return(0,p.jsxs)("section",{className:"chat-loader",children:[(0,p.jsx)(W,{isLoading:!0}),(0,p.jsx)("div",{className:"chat-loader__content",children:(0,p.jsx)(L.ZP,{shape:L.lA.LOGO,size:L.gI.LARGE,color:L.ux.PRIMARY,isAnimated:!1})}),(0,p.jsx)($o.Z,{isLoading:!0})]})},hi=r(3882550213),di={get lxExpiredTitle(){return(0,p.jsx)(_.f1,{path:407,pathName:"bma_client@messenger.expired.title"})},get lxExpiredAction(){return(0,p.jsx)(_.f1,{path:404,pathName:"bma_client@messenger.expired.action"})},get lxExpiredTitleBizz(){return(0,p.jsx)(_.f1,{path:408,pathName:"bma_client@messenger.expired.title.bizz"})},get lxExpiredActionBizz(){return(0,p.jsx)(_.f1,{path:405,pathName:"bma_client@messenger.expired.action.bizz"})},get lxExpiredDescription(){return x.Z.get(406)}};function mi(e){return mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mi(e)}function vi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yi(n.key),n)}}function yi(e){var t=function(e,t){if("object"!==mi(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==mi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===mi(t)?t:String(t)}function gi(e,t){return gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gi(e,t)}function bi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xi(e);if(t){var o=xi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===mi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _i(e)}(this,r)}}function _i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xi(e){return xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xi(e)}var ji=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gi(e,t)}(a,e);var t,r,o,i=bi(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),(0,s.Z)(_i(t)),t.state={isLoading:!1,userEntry:t.props.userEntry?t.props.userEntry.clone():null},t}return t=a,r=[{key:"render",value:function(){var e=this.state.userEntry,t=e&&e.getUser();return(0,p.jsxs)(n.Fragment,{children:[t?(0,p.jsx)(he,{chatUser:t,onUserClick:this.handleUserOpen}):null,this.getContent()]})}},{key:"componentDidMount",value:function(){var e=this.props.error;37===(e&&e.type)?this.openProfile():this.props.actions.closeUserProfile()}},{key:"getContent",value:function(){var e=this.props.error;return 37===(e&&e.type)?this.renderExpiredMatch():(0,p.jsx)(Kn,{})}},{key:"renderExpiredMatch",value:function(){var e,t=this.state.userEntry;if(t){var r=di.lxExpiredTitle,n=di.lxExpiredAction;5===t.getMatchMode()&&(r=di.lxExpiredTitleBizz,n=di.lxExpiredActionBizz);var o=[(0,p.jsx)(cn.ZP,{text:n,onClick:this.handleRematch,color:mr.lt.Features.REMATCH,isDisabled:this.state.isLoading})];e=(0,p.jsx)(Kn,{chatBlocker:(0,p.jsx)(Ln,{title:r,text:(0,p.jsx)(Ar.Z,{html:di.lxExpiredDescription}),photoUrl:t.getProfilePhoto(180,180),expirationStatus:mr.I1.EXPIRED_TIME,expirationStatusProgress:100,actions:o,onAvatarClick:this.handleUserOpen})})}else e=(0,p.jsx)(Kn,{});return e}},{key:"handleRematch",value:function(){if(this.props.hotpanel.click(296),this.props.boostEnabled){var e=this.state.userEntry,t=e&&e.getUserId();this.props.hotpanel.fireRematchEvent({boostEnabled:this.props.boostEnabled,encryptedUserId:t,isFreeRematch:this.props.isFreeRematch}),t&&(this.props.actions.rematchUser(t),this.setState({isLoading:!0}))}else this.props.actions.openBoost({activationPlace:145,context:205,initiatorScreen:void 0})}},{key:"handleUserOpen",value:function(){this.props.isProfileSectionOpen?this.props.actions.closeUserProfile(!0):this.openProfile(!0)}},{key:"openProfile",value:function(e){var t=this.state.userEntry;if(t){var r=t.getUserId();r&&!t.getIsDeleted()&&this.props.actions.openUserProfile({userId:r,gameMode:t.getMatchMode(),clientSource:10,isOpenByUserAction:e})}else this.props.actions.closeUserProfile()}}],r&&vi(t.prototype,r),o&&vi(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.PureComponent),Pi=(0,o.$j)((function(e){var t=(0,un.Lx)(e);return{error:e.messenger.chat.error,userEntry:(0,hi.M6)(e.messenger.usersList),isProfileSectionOpen:e.otherProfile.isSectionOpen,boostEnabled:(0,un.$X)(e)||(0,un.C5)(e)||(0,un.Qn)(e),isFreeRematch:t}}),(function(e){return{actions:(0,i.DE)({openUserProfile:R.DZ,closeUserProfile:R.Rb,rematchUser:K.T9,openBoost:ln.ZC},e),hotpanel:(0,i.DE)({click:O.V4,fireRematchEvent:O.bt},e)}}))(ji),Si=r(3028623845),wi=r(4551567750),ki=r(3694063305),Ci=r(3081340961);function Ei(e){return Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ei(e)}function Oi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ri(n.key),n)}}function Ri(e){var t=function(e,t){if("object"!==Ei(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ei(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ei(t)?t:String(t)}function Mi(e,t){return Mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mi(e,t)}function Ti(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ni(e);if(t){var o=Ni(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ei(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ni(e){return Ni=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ni(e)}var Ii=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mi(e,t)}(i,e);var t,r,n,o=Ti(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var r=e.currentUserId,n=e.hotpanelApi;return t.state={currentUser:{id:r},messagesListFeatures:t.getMessageListFeatures(),RPC:ki.ZP,Logger:{error:function(e){if(console){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console.error(e,r)}},warn:function(e){if(console){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console.warn(e,r)}},debug:function(e){if(console){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console.log(e,r)}}},trackEvent:n.trackEvent.bind(n)},t}return t=i,(r=[{key:"componentDidUpdate",value:function(e){e.isUrlPreviewEnabled!==this.props.isUrlPreviewEnabled&&this.updateMessageListFeatures()}},{key:"render",value:function(){var e=this.props.children;return(0,p.jsx)(Qn.iM,{value:this.state,children:e})}},{key:"getMessageListFeatures",value:function(){var e=this.props.isUrlPreviewEnabled,t=[wi.Z];return e&&t.push(T.ZP),t}},{key:"updateMessageListFeatures",value:function(){this.setState({messagesListFeatures:this.getMessageListFeatures()})}}])&&Oi(t.prototype,r),n&&Oi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.PureComponent),Di=(0,o.$j)((function(e){return{currentUserId:e.user.id,isUrlPreviewEnabled:(0,Ci.B)(e,248).enabled,hotpanelApi:e.hotpanel.hotpanelApi}}),(function(e){return{hotpanel:(0,i.DE)({viewElement:O.Ye},e)}}))(Ii),Ai=r(4349703674);function Ui(e){return Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ui(e)}function Li(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Bi(n.key),n)}}function Bi(e){var t=function(e,t){if("object"!==Ui(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ui(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ui(t)?t:String(t)}function Zi(e,t){return Zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zi(e,t)}function Fi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Vi(e);if(t){var o=Vi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ui(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gi(e)}(this,r)}}function Gi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vi(e){return Vi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vi(e)}var zi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zi(e,t)}(a,e);var t,r,o,i=Fi(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),(0,s.Z)(Gi(t)),t.Placeholder=(0,Si.Z)(No.ZP,{componentDidMount:t.placeholderDidMount.bind(Gi(t)),componentWillUnmount:t.placeholderWillUnmount.bind(Gi(t))}),t}return t=a,(r=[{key:"componentDidMount",value:function(){var e=this.props.activeUserId;e?this.props.actions.fetchChat({userId:e}):this.handleSetChatLoaderTimer()}},{key:"componentDidUpdate",value:function(e){var t,r=this.props,n=r.activeUserId,o=r.totalUserMatches,i=r.dialogType;e.activeUserId!==n&&n&&(null===(t=this.chatLoaderTimeout)||void 0===t||t.clear(),this.props.actions.setActiveUser(n),this.props.actions.fetchChat({userId:n})),!this.chatLoaderTimeout&&o<1&&!i&&this.handleSetChatLoaderTimer(),this.props.parseComponent()}},{key:"render",value:function(){return(0,p.jsx)(Di,{children:(0,p.jsx)(f,{chat:this.renderChat(),profile:(0,p.jsx)(pi.Z,{activationPlace:11,viewProfileOptions:{connectionStatus:11}}),hasVisibleProfile:this.props.isProfileSectionOpen,onTransitionEnd:this.handleTransitionEnd,hasActiveDropArea:this.props.dragEnterCounter>0})})}},{key:"placeholderDidMount",value:function(){this.props.hotpanel.viewScreen(716)}},{key:"placeholderWillUnmount",value:function(){var e,t=this.props,r=t.activeChat,n=306===t.activationPlace?306:191;r&&(e=r.initial_chat_screen?94:20,this.props.hotpanel.viewScreen(e),this.props.hotpanel.fireChatScreenEvent({activeChat:r,activationPlace:n,connectionStatus:11}))}},{key:"renderChat",value:function(){var e=this.props,t=e.activeChat,r=e.isChatLoading,o=e.error,i=(0,p.jsx)(fi,{});return t?i=(0,p.jsxs)(n.Fragment,{children:[(0,p.jsx)(ui,{}),r?(0,p.jsx)(this.Placeholder,{hasLoader:!0,color:No.uJ.LIGHT}):null]}):o&&(i=(0,p.jsx)(Pi,{})),i}},{key:"handleSetChatLoaderTimer",value:function(){var e;null===(e=this.chatLoaderTimeout)||void 0===e||e.clear(),this.chatLoaderTimeout=new(m())(this.handleChatLoaderTimeout,this,1500).set()}},{key:"handleChatLoaderTimeout",value:function(){this.props.actions.routeToPage(new A.Z)}},{key:"handleTransitionEnd",value:function(){!1===this.props.isProfileSectionOpen&&this.props.actions.clearUserProfile()}}])&&Li(t.prototype,r),o&&Li(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.Component),qi=(0,o.$j)((function(e){var t=(0,M.o_)(e),r=(0,hi.ql)(e.messenger.usersList.usersConversations,e.messenger.usersList.usersMatchQueue);return{activeUserId:t,activeChat:e.messenger.chat.activeChat,isChatLoading:e.messenger.chat.isChatLoading,error:e.messenger.chat.error,isProfileSectionOpen:e.otherProfile.isSectionOpen,dragEnterCounter:e.messenger.chat.dragEnterCounter,activationPlace:e.messenger.chat.activationPlace,totalUserMatches:r,dialogType:e.dialog.dialogType}}),(function(e){return{actions:(0,i.DE)({openNextUser:K.v4,clearUserProfile:R.VE,closeUserProfile:R.Rb,fetchChat:P.Gg,setActiveUser:w.nl,routeToPage:X.PT},e),hotpanel:(0,i.DE)({viewScreen:O.pc,fireEvent:O.BX,fireChatScreenEvent:O.E2},e)}}))((0,Ai.lexemeParser)(zi))},6406964886:function(e,t,r){r.d(t,{Z:function(){return Et}});r(8399856839),r(2208919297),r(6846535975),r(7023759947),r(5719665858),r(1458508656),r(5870850526),r(4868193150),r(5180755806),r(4170012245),r(1955050064),r(4408193778),r(8259291635),r(3628678357),r(7497756815),r(3961928829),r(8254830055),r(2366301625),r(595114036),r(5307322158),r(2934925121),r(1461117636),r(5045656282);var n=r(5799271390),o=r(2798562877),i=r(6213419230),s=r(5807393358),a=r(3610594093),c=r(3255534241),l=r(8442664355),u=r(7184754427),p=r(4003688673),f=r(6611884839),h=r(5326901354),d=r(8282233115),m=r(1237301108),v=r.n(m),y=r(2061470840),g=function(e){var t=e.src,r=e.src2x,o=e.onClick;return(0,y.jsx)(n.Fragment,{children:t?(0,y.jsx)("img",{className:"profile__photo",src:t,srcSet:t&&r?"".concat(t," 1x, ").concat(r," 2x"):void 0,alt:"",onClick:o,draggable:!1}):(0,y.jsx)("div",{className:"profile__photo profile__photo--stub",children:(0,y.jsx)(h.ZP,{name:"avatar-placeholder-empty",size:h.Jh.STRETCH})})})},b=r(2711648853),_=(r(4401304538),r(7547022991),["styles"]);function x(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j.apply(this,arguments)}var P,S,w=function(e){var t=e.styles,r=void 0===t?{}:t,o=x(e,_);return n.createElement("svg",j({viewBox:"0 0 302 1124",xmlns:"http://www.w3.org/2000/svg"},o),n.createElement("g",{style:{transform:"translate(0, var(--profile-photo-height, 434px))"}},n.createElement("polygon",{className:(r.profile__section||"profile__section")+" "+(r["profile__section--fake"]||"profile__section--fake"),fill:"#FAFAFA",points:"0 0 302 0 302 183 0 183"}),n.createElement("path",{d:"M24,20 L130,20 C132.209139,20 134,21.790861 134,24 C134,26.209139 132.209139,28 130,28 L24,28 C21.790861,28 20,26.209139 20,24 C20,21.790861 21.790861,20 24,20 Z M24,48 L199,48 C201.209139,48 203,49.790861 203,52 C203,54.209139 201.209139,56 199,56 L24,56 C21.790861,56 20,54.209139 20,52 C20,49.790861 21.790861,48 24,48 Z M24,64 L130,64 C132.209139,64 134,65.790861 134,68 C134,70.209139 132.209139,72 130,72 L24,72 C21.790861,72 20,70.209139 20,68 C20,65.790861 21.790861,64 24,64 Z",fill:"#FFF"}),n.createElement("polygon",{className:(r.profile__section||"profile__section")+" "+(r["profile__section--fake"]||"profile__section--fake"),fill:"#FAFAFA",points:"0 483 302 483 302 666 0 666"}),n.createElement("path",{d:"M24,503 L130,503 C132.209139,503 134,504.790861 134,507 C134,509.209139 132.209139,511 130,511 L24,511 C21.790861,511 20,509.209139 20,507 C20,504.790861 21.790861,503 24,503 Z M24,531 L199,531 C201.209139,531 203,532.790861 203,535 C203,537.209139 201.209139,539 199,539 L24,539 C21.790861,539 20,537.209139 20,535 C20,532.790861 21.790861,531 24,531 Z M24,547 L130,547 C132.209139,547 134,548.790861 134,551 C134,553.209139 132.209139,555 130,555 L24,555 C21.790861,555 20,553.209139 20,551 C20,548.790861 21.790861,547 24,547 Z",fill:"#FFF"})),n.createElement("path",{style:{transform:"translateY(calc(var(--profile-photo-height, 434px) - 52px - 20px))"},d:"M24,0 L130,0 C132.209139,0 134,1.790861 134,4 C134,6.209139 132.209139,8 130,8 L24,8 C21.790861,8 20,6.209139 20,4 C20,1.790861 21.790861,0 24,0 Z M24,28 L216,28 C218.209139,28 220,29.790861 220,32 C220,34.209139 218.209139,36 216,36 L24,36 C21.790861,36 20,34.209139 20,32 C20,29.790861 21.790861,28 24,28 Z M24,44 L216,44 C218.209139,44 220,45.790861 220,48 C220,50.209139 218.209139,52 216,52 L24,52 C21.790861,52 20,50.209139 20,48 C20,45.790861 21.790861,44 24,44 Z",fill:"#FAFAFA"}),n.createElement("path",{d:"M28,36 C23.581722,36 20,32.418278 20,28 C20,23.581722 23.581722,20 28,20 C32.418278,20 36,23.581722 36,28 C36,32.418278 32.418278,36 28,36 Z M52,36 C47.581722,36 44,32.418278 44,28 C44,23.581722 47.581722,20 52,20 C56.418278,20 60,23.581722 60,28 C60,32.418278 56.418278,36 52,36 Z M76,36 C71.581722,36 68,32.418278 68,28 C68,23.581722 71.581722,20 76,20 C80.418278,20 84,23.581722 84,28 C84,32.418278 80.418278,36 76,36 Z",fill:"#FAFAFA"}))},k=r(5036180810),C=r(5914777018),E=r(8441140475),O={get lxBlockAndReport(){return E.Z.get(428)}};function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function M(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==R(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===R(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=(M(P={},d.Cg.DATING,void 0),M(P,d.Cg.BFF,C.YY.PILL_MODE_BFF),M(P,d.Cg.BIZZ,C.YY.PILL_MODE_BIZZ),P),N=(M(S={},d.Cg.DATING,void 0),M(S,d.Cg.BFF,void 0),M(S,d.Cg.BIZZ,"profile--bizz"),S),I=function(e){var t=e.children,r=e.onClickClose,o=e.gameMode,i=e.hasInstagram,s=e.hasSpotify,a=e.isVerified,c=e.hasAbout,l=e.name,u=e.age,p=e.job,f=e.education,m=e.mainPhoto,_=e.onMainPhotoClick,x=e.onScroll,j=e.onScrollDown,P=e.isLoading,S=e.isPromo,E=e.headline,M=e.previousOccupation,I=e.onReportClick,D=v()({profile:!0,"is-loading":P},void 0!==R(N[o])&&N[o]);if(P)return(0,y.jsx)("div",{className:D,children:(0,y.jsx)(w,{})});var A=c||i||s||o!==d.Cg.DATING?(0,y.jsxs)("div",{className:"profile__features",children:[o!==d.Cg.DATING?(0,y.jsx)("div",{className:"profile__feature",children:(0,y.jsx)(C.ZP,{variant:T[o],height:16})}):null,c?(0,y.jsx)("div",{className:"profile__feature",children:(0,y.jsx)(h.ZP,{name:"profile-badge-about",size:h.Jh.SMALL})}):null,i?(0,y.jsx)("div",{className:"profile__feature",children:(0,y.jsx)(h.ZP,{name:"profile-badge-instagram",size:h.Jh.SMALL})}):null,s?(0,y.jsx)("div",{className:"profile__feature",children:(0,y.jsx)(h.ZP,{name:"profile-badge-spotify",size:h.Jh.SMALL})}):null]}):null,U=S?null:(0,y.jsxs)("div",{className:"profile__info",children:[(0,y.jsxs)("div",{className:"profile__user",children:[l?(0,y.jsx)("div",{className:"profile__name",dir:"auto",title:l,children:(0,y.jsx)(k.R6,{hasEllipsis:!0,children:l})}):null,u?(0,y.jsx)("div",{className:"profile__age",children:(0,y.jsxs)(k.R6,{children:[(0,y.jsx)("span",{className:"comma",children:","})," ".concat(u)]})}):null,a?(0,y.jsx)("div",{className:"profile__verify",children:(0,y.jsx)(h.ZP,{name:"badge-feature-verification",size:h.Jh.STRETCH})}):null]}),p?(0,y.jsx)("div",{className:"profile__business profile__business--job",title:p,dir:"auto",children:(0,y.jsx)(k.P2,{hasEllipsis:o!==d.Cg.BIZZ,children:p})}):null,f?(0,y.jsx)("div",{className:"profile__business profile__business--education",title:f,dir:"auto",children:(0,y.jsx)(k.P2,{hasEllipsis:!0,children:f})}):null,M?(0,y.jsx)("div",{className:"profile__business profile__business--previous",dir:"auto",children:(0,y.jsx)(k.P2,{children:M})}):null,E?(0,y.jsx)("div",{className:"profile__headline",dir:"auto",children:(0,y.jsx)(k.P2,{hasBreakWords:!0,children:E})}):null]}),L=I?(0,y.jsx)("div",{className:"profile__report",children:(0,y.jsxs)("div",{className:"profile__report-link",onClick:I,role:"button",children:[(0,y.jsx)("div",{className:"profile__report-icon",role:"presentation",children:(0,y.jsx)(h.ZP,{name:"generic-report",size:h.Jh.STRETCH})}),(0,y.jsx)("div",{className:"profile__report-label",children:(0,y.jsx)(k.P3,{children:O.lxBlockAndReport||"Block & report"})})]})}):null,B=r?(0,y.jsx)("div",{className:"profile__close",onClick:r,children:(0,y.jsx)(h.ZP,{name:"generic-close",size:h.Jh.MEDIUM})}):null;return(0,y.jsxs)("div",{className:D,children:[(0,y.jsxs)(b.Z,{onScroll:x,onScrollDown:j,children:[(0,y.jsxs)("div",{className:"profile__entry",children:[(0,y.jsx)(g,{src:m,onClick:m?_:void 0}),A,U]}),n.Children.map(t,(function(e,t){return(0,n.isValidElement)(e)?(0,y.jsx)(n.Fragment,{children:e},t):null})),L]}),B]})},D=r(3028623845),A=r(7335381311),U=r(1574766092),L=function(e){return(0,y.jsx)(U.f1,{path:475,params:e,pathName:"bma_client@pages.other-profile.user-about",children:"About ".concat(e.name)})},B=r(7698276411),Z=function(e){var t=e.name,r=e.children,n=e.badges,o=e.isShort;return(0,y.jsxs)("div",{className:"profile__section",children:[(0,y.jsxs)("div",{className:"profile__subtitle",children:[(0,y.jsx)("div",{className:"profile__subtitle-icon",children:(0,y.jsx)(h.ZP,{name:"profile-badge-about",size:h.Jh.STRETCH})}),(0,y.jsx)("div",{className:"profile__subtitle-text",children:(0,y.jsx)(k.P2,{weight:k.fs.MEDIUM,hasEllipsis:!0,children:L({name:t})})})]}),r?(0,y.jsx)("div",{className:"profile__about",dir:"auto",children:o?(0,y.jsx)(k.zV,{children:r}):(0,y.jsx)(k.P1,{children:r})}):null,n?(0,y.jsx)("ul",{className:"profile__badges",children:n.map((function(e,t){return(0,y.jsx)("li",{className:"profile__badge",children:(0,y.jsx)(B.Z,{title:e.title,mediaSrc:e.mediaSrc})},"".concat(e.title,"-").concat(t))}))}):null]})};function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==F(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===F(i)?i:String(i)),n)}var o,i}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=H(e);if(t){var o=H(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return q(e)}(this,r)}}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(i,e);var t,r,n,o=z(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(q(t)),t}return t=i,(r=[{key:"render",value:function(){var e=this.props,t=e.aboutMe,r=e.badges,n=e.userName,o=null;return(t||r.length>0)&&(o=(0,y.jsx)(c.Z,{onElementVisible:this.handleVisible,children:(0,y.jsx)(Z,{name:n,badges:r.length>0?this.renderBadges(r):void 0,children:t})})),o}},{key:"renderBadges",value:function(e){return e.map((function(e){return{title:e.display_value,mediaSrc:e.icon_url}}))}},{key:"handleVisible",value:function(){this.props.hotpanel.viewElement(35)}}])&&G(t.prototype,r),n&&G(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.PureComponent);var J=(0,o.$j)((function(e){return{aboutMe:(0,f.ui)(e.otherProfile.userProfileFields),badges:(0,f.ro)(e.otherProfile.userProfileFields),userName:e.otherProfile.userName}}),(function(e){return{hotpanel:(0,i.DE)({viewElement:A.Ye},e)}}))(W),Y=(r(92274908),r(7930707067)),$=function(e){var t=e.src,r=e.src2x,n=e.onClick;return(0,y.jsx)("div",{className:"instagram-feed__item",onClick:n,children:(0,y.jsx)("div",{className:"instagram-feed__photo",children:t?(0,y.jsx)("img",{className:"instagram-feed__img",src:t,srcSet:t&&r?"".concat(t," 1x, ").concat(r," 2x"):void 0,alt:""}):null})})},Q=function(e){var t=e.photos;return(0,y.jsx)("div",{className:"instagram-feed",children:n.Children.map(t,(function(e){return(0,n.isValidElement)(e)?e:null}))})},X=function(e){var t=e.title,r=e.photos;return(0,y.jsxs)("div",{className:"profile__section profile__section--filled",children:[(0,y.jsxs)("div",{className:"profile__subtitle",children:[(0,y.jsx)("div",{className:"profile__subtitle-icon",children:(0,y.jsx)(h.ZP,{name:"profile-badge-instagram",size:h.Jh.STRETCH})}),(0,y.jsx)("div",{className:"profile__subtitle-text",children:(0,y.jsx)(k.P2,{weight:k.fs.MEDIUM,hasEllipsis:!0,children:t})})]}),(0,y.jsx)("div",{className:"profile__instagram-feed",children:(0,y.jsx)(Q,{photos:r})})]})};function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==K(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===K(i)?i:String(i)),n)}var o,i}function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=oe(e);if(t){var o=oe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ne(e)}(this,r)}}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}var ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(i,e);var t,r,n,o=re(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(ne(t)),t}return t=i,(r=[{key:"render",value:function(){var e=this,t=null,r=this.props.album;if(r&&r.photos){var n,o=r.photos.slice(0,9),i=o.length;i<=3?n=new Array(3-i):i<=6?n=new Array(6-i):i<9&&(n=new Array(9-i)),n&&(o=o.concat(n.fill(null)));var s=o.map((function(t,r){var n=null;if(t){var o=e._getInstraImagePreview(t);n=(0,y.jsx)($,{src:o,onClick:e.handleOpenInstagramPhoto.bind(e,t)},r)}else n=(0,y.jsx)($,{},r);return n}));t=(0,y.jsx)(c.Z,{onElementVisible:this.handleVisible,children:(0,y.jsx)(X,{title:r.caption||"",photos:s})})}return t}},{key:"handleVisible",value:function(){this.props.hotpanel.viewElement(44)}},{key:"handleOpenInstagramPhoto",value:function(e){var t,r=(null===(t=this.props.album)||void 0===t?void 0:t.photos)||[],n=r.findIndex((function(t){return t.id===e.id}));this.props.actions.showDialog(l.z,{images:r,activePositionId:n}),this.props.hotpanel.click(20,44)}},{key:"_getInstraImagePreview",value:function(e){return new a.Z(e.large_url).setSize(100,100).applyDensity().getUrl()}}])&&ee(t.prototype,r),n&&ee(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.PureComponent);var se=(0,o.$j)((function(e){return{album:(0,f.Cz)(e.otherProfile.userAlbums)}}),(function(e){return{actions:(0,i.DE)({showDialog:Y.vC},e),hotpanel:(0,i.DE)({viewElement:A.Ye,click:A.V4},e)}}))(ie),ae=(r(2990496325),function(e){return(0,y.jsx)(U.f1,{path:479,params:e,pathName:"bma_client@pages.other-profile.user-spotify.male"})}),ce=function(e){return(0,y.jsx)(U.f1,{path:478,params:e,pathName:"bma_client@pages.other-profile.user-spotify.female"})},le=function(e){var t=e.src,r=e.title;return(0,y.jsxs)("div",{className:"spotify-feed__item",children:[(0,y.jsx)("div",{className:"spotify-feed__photo",children:(0,y.jsx)("img",{className:"spotify-feed__img",src:t,alt:""})}),(0,y.jsx)("div",{className:"spotify-feed__artist",dir:"auto",children:(0,y.jsx)(k.P3,{weight:k.fs.MEDIUM,hasEllipsis:!0,children:r})})]})},ue=function(e){var t=e.children;return(0,y.jsx)("div",{className:"spotify-feed",children:t})},pe=function(e){var t=e.name,r=e.artists;return(0,y.jsxs)("div",{className:"profile__section profile__section--text",children:[(0,y.jsxs)("div",{className:"profile__subtitle",children:[(0,y.jsx)("div",{className:"profile__subtitle-icon",children:(0,y.jsx)(h.ZP,{name:"profile-badge-spotify",size:h.Jh.STRETCH})}),t?(0,y.jsx)("div",{className:"profile__subtitle-text",dir:"auto",children:(0,y.jsx)(k.P2,{weight:k.fs.MEDIUM,hasEllipsis:!0,children:t})}):null]}),(0,y.jsx)("div",{className:"profile__spotify-feed",children:(0,y.jsx)(ue,{children:r})})]})};function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function he(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==fe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===fe(i)?i:String(i)),n)}var o,i}function de(e,t){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},de(e,t)}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ye(e);if(t){var o=ye(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ve(e)}(this,r)}}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}var ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&de(e,t)}(i,e);var t,r,n,o=me(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(ve(t)),t}return t=i,(r=[{key:"render",value:function(){var e=this.props,t=e.userGender,r=null,n={str:e.userName},o=e.spotifyArtists.filter((function(e){return e.preview_image_url&&e.name})).map((function(e,t){return(0,y.jsx)(le,{src:e.preview_image_url,title:e.name},"spotify-feed-item-".concat(t))}));return o.length>0&&(r=(0,y.jsx)(c.Z,{onElementVisible:this.handleVisible,children:(0,y.jsx)(pe,{name:2===t?ce(n):ae(n),artists:o})})),r}},{key:"handleVisible",value:function(){this.props.hotpanel.viewElement(193)}}])&&he(t.prototype,r),n&&he(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.PureComponent);var be=(0,o.$j)((function(e){return{userName:e.otherProfile.userName,userGender:e.otherProfile.userGender,spotifyArtists:(0,f.ev)(e.otherProfile.userMusicServices)}}),(function(e){return{hotpanel:(0,i.DE)({viewElement:A.Ye},e)}}))(ge),_e=function(e){return(0,y.jsx)(U.f1,{path:477,params:e,pathName:"bma_client@pages.other-profile.user-location.male"})},xe=function(e){return(0,y.jsx)(U.f1,{path:476,params:e,pathName:"bma_client@pages.other-profile.user-location.female"})},je=r(1901000052),Pe=function(e){var t=e.name,r=e.location,n=e.distance,o=e.currentCity,i=e.hometown;return(0,y.jsxs)("div",{className:"profile__section profile__section--text profile__section--location",children:[(0,y.jsxs)("div",{className:"profile__subtitle",children:[(0,y.jsx)("div",{className:"profile__subtitle-icon",children:(0,y.jsx)(h.ZP,{name:"profile-badge-location",size:h.Jh.STRETCH})}),(0,y.jsx)("div",{className:"profile__subtitle-text",children:(0,y.jsx)(k.P2,{weight:k.fs.MEDIUM,hasEllipsis:!0,children:t})})]}),(0,y.jsx)("div",{className:"profile__about",children:(0,y.jsx)(je.Z,{town:r,distance:n,currentCity:o,hometown:i})})]})};function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function we(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Se(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Se(i)?i:String(i)),n)}var o,i}function ke(e,t){return ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ke(e,t)}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Oe(e);if(t){var o=Oe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ee(e)}(this,r)}}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}var Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ke(e,t)}(i,e);var t,r,n,o=Ce(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(Ee(t)),t}return t=i,(r=[{key:"render",value:function(){var e=this.props,t=e.userGender,r=e.userName,n=e.userDistanceLongText,o=e.userDistanceShortText,i=e.userHometown,s=e.userResidence,a={str:r};return(0,y.jsx)(c.Z,{onElementVisible:this.handleVisible,children:(0,y.jsx)(Pe,{name:2===t?xe(a):_e(a),location:n,distance:o,hometown:null==i?void 0:i.context_info,currentCity:null==s?void 0:s.context_info})})}},{key:"handleVisible",value:function(){var e=this.props,t=e.userHometown,r=e.userResidence;this.props.hotpanel.viewElement(33),(null==r?void 0:r.context_info)&&this.props.hotpanel.viewElement(1186),(null==t?void 0:t.context_info)&&this.props.hotpanel.viewElement(1185)}}])&&we(t.prototype,r),n&&we(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.PureComponent);var Me=(0,o.$j)((function(e){return{userDistanceLongText:e.otherProfile.userDistanceLongText,userDistanceShortText:e.otherProfile.userDistanceShortText,userHometown:e.otherProfile.userHometown,userResidence:e.otherProfile.userResidence,userGender:e.otherProfile.userGender,userName:e.otherProfile.userName}}),(function(e){return{hotpanel:(0,i.DE)({viewElement:A.Ye},e)}}))(Re);function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Te(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Te(i)?i:String(i)),n)}var o,i}function Ie(e,t){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ie(e,t)}function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ue(e);if(t){var o=Ue(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ae(e)}(this,r)}}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}var Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ie(e,t)}(i,e);var t,r,n,o=De(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(Ae(t)),t}return t=i,(r=[{key:"render",value:function(){var e=null,t=this.props.imageSrc;return t&&(e=(0,y.jsx)(c.Z,{onElementVisible:this.handleVisible,children:(0,y.jsx)(g,{src:t,onClick:this.props.onImageClick})})),e}},{key:"handleVisible",value:function(){this.props.hotpanel.viewElement(21)}}])&&Ne(t.prototype,r),n&&Ne(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.PureComponent);var Be=(0,o.$j)(null,(function(e){return{actions:(0,i.DE)({showDialog:Y.vC},e),hotpanel:(0,i.DE)({viewElement:A.Ye},e)}}))(Le),Ze=function(e){return(0,y.jsx)(U.f1,{path:474,params:e,pathName:"bma_client@pages.other-profile.experience.male"})},Fe=function(e){return(0,y.jsx)(U.f1,{path:472,params:e,pathName:"bma_client@pages.other-profile.education.male"})},Ge=function(e){return(0,y.jsx)(U.f1,{path:473,params:e,pathName:"bma_client@pages.other-profile.experience.female"})},Ve=function(e){return(0,y.jsx)(U.f1,{path:471,params:e,pathName:"bma_client@pages.other-profile.education.female"})},ze=function(e){var t=e.jobTitle,r=e.educationTitle,o=e.job,i=e.education;return(0,y.jsxs)("div",{className:"profile__section",children:[o?(0,y.jsxs)(n.Fragment,{children:[(0,y.jsxs)("div",{className:"profile__subtitle",children:[(0,y.jsx)("div",{className:"profile__subtitle-icon",children:(0,y.jsx)(h.ZP,{name:"profile-badge-experience",size:h.Jh.STRETCH})}),(0,y.jsx)("div",{className:"profile__subtitle-text",children:(0,y.jsx)(k.P2,{weight:k.fs.MEDIUM,hasEllipsis:!0,children:t})})]}),(0,y.jsx)("div",{className:"profile__experience",children:(0,y.jsx)("div",{className:"profile-experience",children:o.map((function(e,t){return(0,y.jsxs)("div",{className:"profile-experience__item",children:[(0,y.jsxs)("div",{className:"profile-experience__title",children:[(0,y.jsx)(k.P1,{weight:k.fs.MEDIUM,children:e.title}),e.employer?(0,y.jsx)(k.P1,{weight:k.fs.MEDIUM,children:e.employer}):null]}),(0,y.jsx)("div",{className:"profile-experience__period",children:(0,y.jsx)(k.P3,{tag:k.rh.P,weight:k.fs.MEDIUM,children:e.period})})]},"profile-job-item-".concat(t))}))})})]}):null,i?(0,y.jsxs)(n.Fragment,{children:[(0,y.jsxs)("div",{className:"profile__subtitle",children:[(0,y.jsx)("div",{className:"profile__subtitle-icon",children:(0,y.jsx)(h.ZP,{name:"profile-badge-experience",size:h.Jh.STRETCH})}),(0,y.jsx)("div",{className:"profile__subtitle-text",children:(0,y.jsx)(k.P2,{weight:k.fs.MEDIUM,hasEllipsis:!0,children:r})})]}),(0,y.jsx)("div",{className:"profile__experience",children:(0,y.jsx)("div",{className:"profile-experience",children:i.map((function(e,t){return(0,y.jsxs)("div",{className:"profile-experience__item",children:[(0,y.jsx)("div",{className:"profile-experience__title",children:e.title}),(0,y.jsx)("div",{className:"profile-experience__period",children:(0,y.jsx)(k.P3,{tag:k.rh.P,weight:k.fs.MEDIUM,children:e.period})})]},"profile-education-item-".concat(t))}))})})]}):null]})};function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function He(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==qe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===qe(i)?i:String(i)),n)}var o,i}function We(e,t){return We=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},We(e,t)}function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ye(e);if(t){var o=Ye(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ye(e)}var $e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&We(e,t)}(i,e);var t,r,n,o=Je(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"render",value:function(){var e=this.props,t=e.userGender,r={name:e.userName};return(0,y.jsx)(ze,{jobTitle:2===t?Ge(r):Ze(r),educationTitle:2===t?Ve(r):Fe(r),job:this.getJobList(),education:this.getEducationList()})}},{key:"getJobList",value:function(){var e=this.props.userJobs.map((function(e){return{title:e.name||"",employer:e.organization_name||"",period:e.period_description||""}}));return e.length?e:void 0}},{key:"getEducationList",value:function(){var e=this.props.userEducations.map((function(e){return{title:e.name||"",employer:e.organization_name||"",period:e.period_description||""}}));return e.length?e:void 0}}])&&He(t.prototype,r),n&&He(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.PureComponent);var Qe=(0,o.$j)((function(e){return{userName:e.otherProfile.userName,userGender:e.otherProfile.userGender,userJobs:e.otherProfile.userJobs,userEducations:e.otherProfile.userEducations}}))($e),Xe=function(e){var t=e.question,r=e.answer;return(0,y.jsx)("div",{className:"profile__section profile__section--answer",children:(0,y.jsxs)("div",{className:"profile-answer",children:[(0,y.jsx)("div",{className:"profile-answer__title",children:(0,y.jsx)(k.P2,{tag:k.rh.H3,weight:k.fs.MEDIUM,children:t})}),(0,y.jsx)("div",{className:"profile-answer__text",dir:"auto",children:(0,y.jsx)(k.zV,{tag:k.rh.P,children:r})})]})})};function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Ke(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ke(i)?i:String(i)),n)}var o,i}function tt(e,t){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tt(e,t)}function rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ot(e);if(t){var o=ot(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nt(e)}(this,r)}}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ot(e)}var it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tt(e,t)}(i,e);var t,r,n,o=rt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.Z)(nt(t)),t}return t=i,(r=[{key:"render",value:function(){var e=this.props.question;return(0,y.jsx)(c.Z,{onElementVisible:this.handleVisible,children:(0,y.jsx)(Xe,{question:e.name,answer:e.display_value})})}},{key:"handleVisible",value:function(){var e=this.props,t=e.question,r=e.userId;this.props.hotpanel.viewQuestionsOtherProfile(r,Number(t.id))}}])&&et(t.prototype,r),n&&et(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.PureComponent);var st=(0,o.$j)((function(e){return{userId:e.otherProfile.userId}}),(function(e){return{hotpanel:(0,i.DE)({viewQuestionsOtherProfile:A.uK},e)}}))(it),at=r(8513482079),ct=r(4349703674),lt=r(2823879193);function ut(e){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ut(e)}function pt(e){return function(e){if(Array.isArray(e))return ft(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ft(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ht(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==ut(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ut(i)?i:String(i)),n)}var o,i}function dt(e,t){return dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dt(e,t)}function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=yt(e);if(t){var o=yt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ut(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vt(e)}(this,r)}}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yt(e){return yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yt(e)}var gt="photo",bt="about-me",_t="experience",xt="instagram",jt="location",Pt="spotify",St="question",wt=[bt,gt,St,gt,St,gt,St,xt,gt,gt,jt,Pt],kt=[bt,gt,_t,gt,St,gt,St,gt,St,gt,jt],Ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dt(e,t)}(h,e);var t,r,o,i=mt(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),t=i.call(this,e),(0,s.Z)(vt(t)),t.viewProfileInfoSent=!1,t.ProfileContainer=(0,D.Z)(I,{componentDidMount:t.profileDidMount.bind(vt(t))}),t.ProfileLoadingContainer=(0,D.Z)(I,{componentDidMount:t.profileLoadingDidMount.bind(vt(t))}),t}return t=h,(r=[{key:"render",value:function(){var e=null,t=this.props,r=t.userId,o=t.userAlbums,i=t.userMusicServices,s=t.userPhoto,a=t.userVerificationStatus,l=t.userName,p=t.userAge,h=t.userProfileSummaryText,d=t.userProfileSecondaryText,m=t.isPromoPartner,v=t.headline,g=t.hasAbout,b=(0,u.y)(this.props.userGameMode);if(this.props.isLoading)e=(0,y.jsx)(this.ProfileLoadingContainer,{isLoading:!0,gameMode:b});else if(r){var _=this._getProfilePhoto((null==s?void 0:s.large_url)||""),x=(0,f.Cz)(o),j=(0,f.ev)(i),P=5===this.props.userGameMode;e=(0,y.jsx)(this.ProfileContainer,{gameMode:b,hasInstagram:x&&x.count_of_photos,hasSpotify:j.length>0,isVerified:4===a,hasAbout:g,name:l,isPromo:m,age:p,job:h,education:P?null:d,previousOccupation:P?d:null,headline:v,mainPhoto:_,onClickClose:this.handleCloseProfile,onMainPhotoClick:this.handleImageClick.bind(this,s),children:(0,y.jsx)(c.Z,{onElementVisible:this.handleVisibleProfileInfo,children:(0,y.jsx)(n.Fragment,{children:this.renderBlocks()})})})}return e}},{key:"getRenderBlocks",value:function(){return 5===this.props.userGameMode?kt:wt}},{key:"renderBlocks",value:function(){var e=this,t=this.props,r=t.userId,n=t.userAlbums,o=t.questions;if(!r)return null;var i=o.slice(),s=(0,f.ZQ)(n,2).slice();return this.getRenderBlocks().map((function(t,r){var n=null;switch(t){case bt:n=(0,y.jsx)(J,{},r);break;case _t:n=(0,y.jsx)(Qe,{},r);break;case St:n=e.getQuestionBlock(i,r);break;case xt:n=(0,y.jsx)(se,{},r);break;case jt:n=e.getLocationBlock(r);break;case Pt:n=(0,y.jsx)(be,{},r);break;case gt:n=e.getPhotoBlock(s,r)}return n}))}},{key:"getQuestionBlock",value:function(e,t){if(e.length>0){var r=e.shift();if(r)return(0,y.jsx)(st,{question:r},t)}return null}},{key:"getLocationBlock",value:function(e){return this.props.userDistanceLongText?(0,y.jsx)(Me,{},e):null}},{key:"getPhotoBlock",value:function(e,t){if(e.length>0){var r=e.shift();if(r)return(0,y.jsx)(Be,{imageSrc:this._getProfileImagePreview(r),onImageClick:this.handleImageClick.bind(this,r)},t)}return null}},{key:"profileDidMount",value:function(){var e=this.props,t=e.userGameMode,r=e.activationPlace,n=e.viewProfileOptions,o=e.userId,i=e.userProfileSummaryText,s=e.userProfileSecondaryText,a=e.badges;o&&(this.props.hotpanel.viewProfile(r,o,Object.assign({mode:(0,lt.y)(t),profileType:3,lifestyleBadgesCount:a.length},n)),i&&this.props.hotpanel.viewElement(36),s&&this.props.hotpanel.viewElement(37),this.props.parseComponent())}},{key:"profileLoadingDidMount",value:function(){this.props.hotpanel.viewElement(953)}},{key:"handleCloseProfile",value:function(){this.props.actions.closeUserProfile(!0)}},{key:"handleImageClick",value:function(e){var t=this.props,r=t.userAlbums,n=t.userId,o=t.userPhoto;if(n&&e){var i=(0,f.ZQ)(r,2),s=o?[o].concat(pt(i)):i,a=s.findIndex((function(t){return t.id===e.id}));this.props.actions.showDialog(l.z,{images:s,activePositionId:a}),this.props.hotpanel.click(21),e.id&&this.props.hotpanel.viewProfilePhoto(e.id,n)}}},{key:"handleVisibleProfileInfo",value:function(){this.props.userId&&!this.viewProfileInfoSent&&(this.props.hotpanel.viewProfileInfo(this.props.activationPlace,this.props.userId),this.viewProfileInfoSent=!0)}},{key:"_getProfilePhoto",value:function(e){return(0,p.gJ)(e,300,450,!0)}},{key:"_getProfileImagePreview",value:function(e){return new a.Z(e.large_url).setSize(302,1024).applyDensity().getUrl()}}])&&ht(t.prototype,r),o&&ht(t,o),Object.defineProperty(t,"prototype",{writable:!1}),h}(n.PureComponent);var Et=(0,o.$j)((function(e){return{userName:e.otherProfile.userName,userAge:e.otherProfile.userAge,userProfileSummaryText:e.otherProfile.userProfileSummaryText,userProfileSecondaryText:e.otherProfile.userProfileSecondaryText,isPromoPartner:e.otherProfile.isPromoPartner,userPhoto:e.otherProfile.userPhoto,userAlbums:e.otherProfile.userAlbums,userMusicServices:e.otherProfile.userMusicServices,userVerificationStatus:e.otherProfile.userVerificationStatus,hasAbout:(0,f.bU)(e.otherProfile.userProfileFields),headline:(0,f.tH)(e.otherProfile.userProfileFields),badges:(0,f.ro)(e.otherProfile.userProfileFields),userId:e.otherProfile.userId,isLoading:e.otherProfile.isLoading,userGameMode:e.otherProfile.userGameMode,questions:(0,f.tI)(e.otherProfile.userProfileFields),userDistanceLongText:e.otherProfile.userDistanceLongText}}),(function(e){return{actions:(0,i.DE)({closeUserProfile:at.Rb,showDialog:Y.vC},e),hotpanel:(0,i.DE)({viewElement:A.Ye,viewProfile:A.gP,viewProfileInfo:A.E$,viewProfilePhoto:A.I7,click:A.V4},e)}}))((0,ct.lexemeParser)(Ct))}}]);